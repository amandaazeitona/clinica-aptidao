webpackJsonp([1],{1487:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t={children:h.default.node,delay:h.default.number,wrapperClassName:h.default.string,targetWrapperClassName:h.default.string,mode:h.default.oneOf(["mount","visibility"]),onExit:h.default.func},n={mode:"mount"},o=function(n){function o(e){a(this,o);var t=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.handleMouseMove=t.handleMouseMove.bind(t),t.handleMouseLeave=t.handleMouseLeave.bind(t),t.state={isHovering:!1},t}return i(o,n),l(o,[{key:"shouldComponentUpdate",value:function(e,t){var n=!(0,c.default)(this.props,e),o=this.state.isHovering!==t.isHovering;return n||o}},{key:"handleMouseMove",value:function(){var e=this;this.state.isHovering||this.hoverTimerId||(this.hoverTimerId=window.setTimeout(function(){e.hoverTimerId=null,e.setState({isHovering:!0})},this.props.delay))}},{key:"handleMouseLeave",value:function(){this.hoverTimerId&&(window.clearTimeout(this.hoverTimerId),this.hoverTimerId=null),this.setState({isHovering:!1},this.props.onExit)}},{key:"renderHoverContents",value:function(){var n=this.state.isHovering,o=this.props,a=o.mode,r=o.targetWrapperClassName,i=(0,f.default)(this.props,Object.keys(t));return"visibility"===a?v.default.createElement("span",{className:r,style:{visibility:n?"visible":"hidden"}},v.default.createElement(e,Object.assign({},i))):n?v.default.createElement(e,Object.assign({},i)):null}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.wrapperClassName;return v.default.createElement("span",{className:n,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},this.renderHoverContents(),t)}}]),o}(m.Component);return o.displayName="WrappedHoverComponent",o.propTypes=t,o.defaultProps=n,o}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.default=u;var s=n(525),c=o(s),d=n(149),f=o(d),p=n(2),h=o(p),m=n(1),v=o(m)},1488:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1510);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1493:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1519);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1494:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1522);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1495:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1524);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1498:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1499);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1499:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FollowButton=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(510);var l=n(8),s=o(l),c=n(52),d=o(c),f=n(2),p=o(f),h=n(1),m=o(h),v=n(11),y=n(28),_=n(16),b=n(511),g=n(514),w=n(18),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(w),T=n(34),O=n(29),E=n(19),k=n(51),S=n(68),I=o(S),R=n(59),C=o(R),D=n(33),N=o(D),M=n(1500),j=o(M),L={selectedUser:p.default.object.isRequired,authUser:p.default.object,location:p.default.object,className:p.default.string,redirectAfterFollow:p.default.bool,trackFollowButtonClick:p.default.func.isRequired,trackUnfollowButtonClick:p.default.func.isRequired,followUser:p.default.func.isRequired,unfollowUser:p.default.func.isRequired,labelText:p.default.shape({isFollowing:p.default.string.isRequired,isNotFollowing:p.default.string.isRequired}),buttonType:p.default.string},B={labelText:{isFollowing:"Following",isNotFollowing:"Follow"}},x=t.FollowButton=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentWillUnmount",value:function(){this.followSubscription&&this.followSubscription.unsubscribe()}},{key:"getLabelText",value:function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,n=e.location,o=(0,T.getLocationQuery)(n),a=t?o:Object.assign({},o,{login_view:"is_visible",login_action:"follow"});return{pathname:n.pathname,search:(0,E.buildSearchFromQuery)(a),state:n.state}}},{key:"buildClickHandler",value:function(){var e=this,t=this.props,n=t.authUser,o=t.selectedUser,a=t.followUser,r=t.unfollowUser,i=t.trackFollowButtonClick,u=t.trackUnfollowButtonClick,l=t.buttonType;if(!n)return function(){return i(o.id,l)};var s=o.username,c=o.followed_by_user,d=c?I.default.custom.unfollowUser:I.default.custom.followUser,f=_.Observable.defer(function(){return d(s)}).pipe((0,b.retry)(3),(0,g.take)(1));return function(t){t.stopPropagation(),c?(r(o.id),u(o.id,l)):(a(o.id),i(o.id,l)),e.followSubscription=f.subscribe()}}},{key:"renderContainer",value:function(e){var t=this.props,n=t.selectedUser,o=t.className,a=t.redirectAfterFollow,r=t.authUser,i=this.buildClickHandler(),u=n.followed_by_user,l=!r,c=a||l,d={className:(0,s.default)(j.default.followButton,u&&j.default.isFollowing,o),buttonSize:"small"};return c?m.default.createElement(C.default,Object.assign({tag:"link",to:this.buildToLink(),onMouseUp:i},d),e):m.default.createElement(C.default,Object.assign({tag:"button",onMouseUp:i},d),e)}},{key:"render",value:function(){var e=this.props,t=e.selectedUser,n=e.authUser;return(0,d.default)(n,"username")===t.username?m.default.createElement("div",null):this.renderContainer(m.default.createElement("span",null,m.default.createElement(N.default,{type:O.SvgType.follow,className:j.default.followIcon}),this.getLabelText()))}}]),t}(h.Component);x.displayName="FollowButton",x.propTypes=L,x.defaultProps=B;var A=function(e){return{authUser:(0,k.getAuthUser)(e)}},U={trackFollowButtonClick:P.trackFollowButtonClick,trackUnfollowButtonClick:P.trackUnfollowButtonClick,followUser:P.followUser,unfollowUser:P.unfollowUser};t.default=(0,y.withRouter)((0,v.connect)(A,U)(x))},1500:function(e,t){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}},1501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SEARCH_DELAY=600,t.SEARCH_TRACKING_DELAY=2500,t.CARD_HOVER_DELAY=500},1502:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1503);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1503:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserResultCard=void 0;var a=n(8),r=o(a),i=n(52),u=o(i),l=n(2),s=o(l),c=n(1),d=o(c),f=n(11),p=n(28),h=n(58),m=n(14),v=n(51),y=n(75),_=n(205),b=o(_),g=n(1498),w=o(g),P=n(1504),T=o(P),O=n(1507),E=o(O),k={children:s.default.element,user:s.default.object.isRequired,photos:s.default.array,authUser:s.default.object,withinContainer:s.default.bool,withFollowButton:s.default.bool},S=t.UserResultCard=function(e){var t=e.user,n=e.photos,o=e.authUser,a=e.withinContainer,i=e.withFollowButton,l=e.children,s=!!t.total_photos,c=s&&(0,y.range)(3).map(function(e){return d.default.createElement(T.default,{key:e,photo:(0,u.default)(n,e)})}),f=i&&o&&o.id!==t.id;return d.default.createElement("div",{className:(0,r.default)(E.default.cardLink,a&&E.default.withinContainer)},d.default.createElement(p.Link,{className:E.default.container,to:{pathname:(0,h.buildUserUrl)(t)},onClick:function(){return window.scrollTo(0,0)}},d.default.createElement("div",{className:E.default.topContainer},d.default.createElement("div",{className:E.default.userAvatarContainer},d.default.createElement(b.default,{className:E.default.avatar,user:t,avatarSize:_.AvatarSize.medium,disableLink:!0})),d.default.createElement("div",{className:E.default.userInfoContainer},d.default.createElement("h1",{className:E.default.userName},t.name),d.default.createElement("p",{className:E.default.userHandle},"@"+t.username))),s&&d.default.createElement("div",{className:E.default.bottomContainer},c)),f&&d.default.createElement("div",{className:E.default.followButtonContainer},d.default.createElement(w.default,{selectedUser:t,className:E.default.followButton})),l)};S.displayName="UserResultCard",S.propTypes=k;var I=function(e,t){return{authUser:(0,v.getAuthUser)(e),photos:(0,y.pickValues)((0,m.getPhotosById)(e),t.user.photoIds)||t.user.photos}};t.default=(0,f.connect)(I)(S)},1504:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1505);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1505:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),i=n(52),u=o(i),l=n(2),s=o(l),c=n(1),d=o(c),f=n(25),p=n(1506),h=o(p),m={photo:s.default.object,darker:s.default.bool.isRequired},v={darker:!1},y=function(e){var t=e.photo,n=e.darker,o=(0,u.default)(t,"urls.thumb"),a=(0,u.default)(t,"color");return d.default.createElement("div",{className:(0,r.default)(h.default.photoThumbContainer,n?h.default.photoThumbContainerDark:h.default.photoThumbContainerLight),style:t&&{backgroundColor:a}},d.default.createElement("div",{className:h.default.photoThumb,style:t&&{backgroundImage:(0,f.urlToBackgroundImage)(o)}}))};y.propTypes=m,y.defaultProps=v,t.default=y},1506:function(e,t){e.exports={colors:'"styles/Colors.css"',colorDarkWhite:"#f5f5f5",colorLightGrey:"#ddd",photoThumbContainer:"_1BiZr",photoThumbContainerLight:"_1QflV",photoThumbContainerDark:"_3mBAu",photoThumb:"_2te-4"}},1507:function(e,t){e.exports={clearfix:"_2TNYr","sm-col":"_6_Gu-","sm-col-6":"_2cVF0","md-col-4":"_1hITE",px2:"_2DKvn",floatLeft:"_2T3hc","--sm-min":"(--sm-min)",colorLightGrey:"#ddd",colorGrey:"#999",colorLightBlack:"#111",bodyCopy:"_1iWCF",truncate:"_1ByhS",textDecorationNone:"_1CBrG",spacingBase:"16px",avatarSize:"64px",grid:"_15FGY _6_Gu- _2cVF0 _1hITE _2DKvn",cardLink:"_3x_oL",withinContainer:"_3eFB8",container:"_2Twi2 _1CBrG",topContainer:"_2Em44 _2TNYr",userAvatarContainer:"_6jh8j _2T3hc",avatar:"_2ogcu",userInfoContainer:"_3_xrB",userName:"_2_qf1 _1ByhS _1iWCF",userHandle:"_1l0oJ _1ByhS",bottomContainer:"_1dc02",followButtonContainer:"_3u1LW",followButton:"_1TZOC"}},1508:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1511);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1509:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.reportPhotoImpressions=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),s=o(l),c=n(1556),d=o(c),f=n(11),p=n(99),h=o(p),m=n(18),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m),y=n(25),_=!0===h.default.get("ENABLE_PHOTO_IMPRESSIONS_TRACKING");t.reportPhotoImpressions=function(e){var t=function(t){function n(){return a(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),u(n,[{key:"reportImpression",value:function(e){if(e){var t=this.props,n=t.photo,o=t.position;(0,t.reportPhotoImpression)({photo:{id:n.id,position:o}})}}},{key:"render",value:function(){var t=s.default.createElement(e,Object.assign({},this.props));return _&&y.isBrowser&&(0,y.checkSupportsIntersectionObservers)()?s.default.createElement(d.default,{onChange:this.reportImpression.bind(this),threshold:.5},t):t}}]),n}(l.Component);t.displayName="WrappedReportPhotoImpressionsComponent";var n={reportPhotoImpression:v.reportPhotoImpression};return(0,f.connect)(null,n)(t)}},1510:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),u=n(2),l=o(u),s=n(1),c=o(s),d=n(28),f=n(122),p=n(1501),h=n(58),m=n(1487),v=o(m),y=n(205),_=o(y),b=n(1508),g=o(b),w=n(1513),P=o(w),T={user:l.default.object.isRequired,type:l.default.oneOf(["default","alt","emphasiseUsername"]),secondaryLink:l.default.shape({label:l.default.string.isRequired,href:l.default.string.isRequired}),includeAvatar:l.default.bool,inline:l.default.bool,isInFollowingFeed:l.default.bool,children:l.default.node},O={type:"default",includeAvatar:!1},E=(0,v.default)(g.default),k=function(e){var t,n=e.user,o=e.type,r=e.secondaryLink,u=e.children,l=e.includeAvatar,s=e.inline,f=e.isInFollowingFeed,m=function(){switch(o){case"default":return[];case"alt":return[P.default.alt];case"emphasiseUsername":return[P.default.mainLinkEmphasiseUsernameType,P.default.linkEmphasiseUsernameType]}}(),v=function(){switch(o){case"alt":return P.default.alt;case"emphasiseUsername":return P.default.linkEmphasiseUsernameType;default:return}}();return c.default.createElement("span",{className:P.default.container},l&&c.default.createElement(E,{user:n,delay:p.CARD_HOVER_DELAY,wrapperClassName:P.default.avatarContainer},c.default.createElement(_.default,{user:n,className:P.default.avatar})),c.default.createElement("div",{className:(0,i.default)(P.default.linkContainer,s&&P.default.inlineContainer,f&&P.default.feedContainer)},c.default.createElement(E,{user:n,delay:p.CARD_HOVER_DELAY},c.default.createElement(d.Link,{to:{pathname:(0,h.buildUserUrl)(n)},className:(0,i.default)(P.default.name,m,(t={},a(t,P.default.centerName,!r),a(t,P.default.inlineLink,s),t))},u||n.name),r?c.default.createElement("a",{href:r.href,className:(0,i.default)(P.default.name,v,a({},P.default.secondaryLink,r))},r.label):null)))};k.propTypes=T,t.default=(0,f.withDefaults)(k,O)},1511:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(2),s=o(l),c=n(1),d=o(c),f=n(11),p=n(18),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),m=n(25),v=n(98),y=n(51),_=n(68),b=o(_),g=n(69),w=n(516),P=o(w),T=n(1502),O=o(T),E=n(1512),k=o(E),S={user:s.default.object.isRequired,authUser:s.default.object,updateData:s.default.func.isRequired},I=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.updateData,o=e.authUser;return(0,m.checkUserIsEnhanced)({user:t,authUser:o})?d.default.createElement(P.default,{className:k.default.cardTooltip},d.default.createElement(O.default,{withinContainer:!0,withFollowButton:!0,user:t,actions:h})):(b.default.users.profile(t.username).then(g.handleApiFetchResponse).then((0,v.normalizeResponse)("user")).then(function(e){var t=e.entities;n(t)}),null)}}]),t}(c.Component);I.displayName="UserDetailsCard",I.propTypes=S;var R=function(e){return{authUser:(0,y.getAuthUser)(e)}};t.default=(0,f.connect)(R,{updateData:h.updateData})(I)},1512:function(e,t){e.exports={cardTooltip:"wVee7"}},1513:function(e,t){e.exports={hoverTransition:"_3XJBh",colorWhite:"#fff",fontWeightMedium:"xLon9",truncate:"_1ByhS",textDecorationNone:"_1CBrG",container:"_2aPXR",avatarContainer:"JRtMq",avatar:"qNcZ0",linkContainer:"_80uCh",name:"_3XzpS _1ByhS",centerName:"_2zITg",secondaryLink:"NRFpG _1ByhS",alt:"_1_w0v _3XJBh _1CBrG",mainLinkEmphasiseUsernameType:"_1O9Y0 xLon9",linkEmphasiseUsernameType:"_3l__V _1CBrG",inlineContainer:"_3qohC",inlineLink:"_1ZT8D",feedContainer:"_3n7HL"}},1517:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1518);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1518:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SmallPhoto=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(8),s=o(l),c=n(150),d=o(c),f=n(1),p=o(f),h=n(11),m=n(28),v=n(25),y=n(204),_=n(58),b=n(122),g=n(526),w=n(121),P=n(203),T=n(1493),O=o(T),E=n(1494),k=o(E),S=n(1495),I=o(S),R=n(1488),C=o(R),D=n(1526),N=n(1527),M=o(N),j={inFollowingFeed:!1,shouldIncludeLink:!0},L=t.SmallPhoto=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseMove=n.handleMouseMove.bind(n),n.handleMouseLeave=n.handleMouseLeave.bind(n),n.state={isHovering:!1},n}return i(t,e),u(t,[{key:"getActionsState",value:function(){var e=this.state.isHovering,t=this.props,n=t.jsLoaded,o=t.downloadButtonXp,a=t.inFollowingFeed,r=(0,D.checkShouldShowDownloadButton)({downloadButtonXp:o,inFollowingFeed:a});return e||!n?D.ActionsStates.All:r&&!e?D.ActionsStates.DownloadButton:void 0}},{key:"handleMouseMove",value:function(){(0,D.checkHasWorkingHover)()&&!this.state.isHovering&&this.setState({isHovering:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHovering:!1})}},{key:"renderPhotoInfo",value:function(){var e=this.props,t=e.photo,n=e.linkTo,o=e.windowWidth,a=e.location,r=e.imageUrl,i=e.showPhotoInfoOnHover,u=e.shouldIncludeLink,l=!(0,y.checkIsPhone)(o);return p.default.createElement("div",{className:(0,s.default)(M.default.photoInfo,void 0!==this.getActionsState()&&M.default.photoInfoIsShown),onMouseMove:l?this.handleMouseMove:void 0,onMouseLeave:l?this.handleMouseLeave:void 0},u&&p.default.createElement(m.Link,{title:"View the photo by "+t.user.name,to:n||(0,_.buildPhotoLink)(t,a,o,{initialSrc:r}),className:M.default.photoInfoLink}),i&&this.renderActions())}},{key:"renderLikeButton",value:function(){var e=this.props,t=e.location,n=e.photo;return p.default.createElement(I.default,{type:"alt",location:t,photo:n})}},{key:"renderAddToCollectionButton",value:function(){var e=this.props,t=e.location,n=e.photo;return p.default.createElement("div",{className:M.default.addToCollectionButtonContainer},p.default.createElement(O.default,{className:M.default.collectionButton,type:"alt",photo:n,location:t}))}},{key:"renderDownloadButton",value:function(){var e=this.props,t=e.photo,n=e.downloadButtonXp,o=e.inFollowingFeed,a=(0,D.checkShouldShowTooltip)({downloadButtonXp:n,inFollowingFeed:o}),r=(0,D.checkShouldShowLabel)({downloadButtonXp:n,inFollowingFeed:o});return p.default.createElement("div",{className:M.default.buttonDownloadContainer},p.default.createElement(k.default,{type:"alt",photo:t,showLabel:r,showTooltip:a}))}},{key:"renderUserLink",value:function(){var e=this.props.photo.user;return p.default.createElement("div",{className:M.default.userContainer},p.default.createElement(C.default,{includeAvatar:!0,user:e,type:"alt"}))}},{key:"renderTopActions",value:function(){switch(this.getActionsState()){case D.ActionsStates.All:return p.default.createElement("div",{className:M.default.actionsTop},this.renderLikeButton(),this.renderAddToCollectionButton());case D.ActionsStates.DownloadButton:case void 0:return}}},{key:"renderBottomActions",value:function(){switch(this.getActionsState()){case D.ActionsStates.All:return p.default.createElement("div",{className:M.default.actionsBottom},this.renderUserLink(),this.renderDownloadButton());case D.ActionsStates.DownloadButton:return p.default.createElement("div",{className:M.default.actionsBottom},this.renderDownloadButton());case void 0:return}}},{key:"renderActions",value:function(){return void 0!==this.getActionsState()?p.default.createElement("div",null,this.renderTopActions(),this.renderBottomActions()):null}},{key:"renderImage",value:function(){var e=this,t=this.props,n=t.photo,o=t.width,a=t.height,r=t.imageUrl,i=t.fillWidth,u=t.children,l=t.followingFeedClassName,c=t.inFollowingFeed,f=t.photoRef,h={backgroundImage:(0,v.urlToBackgroundImage)(r),backgroundColor:n.color,backgroundSize:"cover",width:i?"100%":o,height:a};return p.default.createElement("div",{style:c?h:{},className:(0,s.default)(c&&(0,s.default)(M.default.photo,l))},!c&&p.default.createElement("img",{alt:n.description||void 0,src:r,ref:function(t){(0,d.default)(f)&&f(t),e.linkElem=t},className:M.default.imgPhoto,style:{width:i?"100%":o,height:a}}),u)}},{key:"render",value:function(){var e=this.props.containerClassName;return p.default.createElement("div",{className:(0,s.default)(M.default.container,e)},this.renderImage(),this.renderPhotoInfo())}}]),t}(f.PureComponent);L.displayName="SmallPhoto";var B=function(e,t){return{jsLoaded:(0,g.getJsLoaded)(e),windowWidth:(0,w.getWindowWidth)(e),downloadButtonXp:(0,P.getDownloadButtonXp)(e).orUndefined()}};t.default=(0,m.withRouter)((0,b.withDefaults)((0,h.connect)(B)(L),j))},1519:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddToCollectionButton=void 0;var a=n(8),r=o(a),i=n(2),u=o(i),l=n(1),s=o(l),c=n(11),d=n(18),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),p=n(29),h=n(51),m=n(59),v=o(m),y=n(33),_=o(y),b=n(1520),g=n(1521),w=o(g),P={type:u.default.oneOf(["default","alt"]),photo:u.default.object.isRequired,setSelectedPhoto:u.default.func.isRequired,trackCollectionButtonClick:u.default.func.isRequired,location:u.default.object.isRequired,className:u.default.string,authUser:u.default.object,handleClick:u.default.func,children:u.default.node},T={type:"default"},O=t.AddToCollectionButton=function(e){var t=e.photo,n=e.setSelectedPhoto,o=e.trackCollectionButtonClick,a=e.location,i=e.type,u=e.className,l=e.authUser,c=e.handleClick,d=e.children,f="default"===i?"outline":"outline-alt";return s.default.createElement(v.default,{className:(0,r.default)(w.default.buttonCollections,u),buttonType:(0,b.inCollectionModifier)(f,t),buttonSize:"small",tag:"link",title:"Add to collection",to:(0,b.buildToLink)(l,a,t),onClick:function(){n({id:t.id}),o(t.id),c&&c()}},s.default.createElement(_.default,{type:p.SvgType.plus,className:w.default.addIcon}),s.default.createElement("span",{className:w.default.label},d,"Collect"))};O.displayName="AddToCollectionButton",O.propTypes=P,O.defaultProps=T;var E=function(e){return{authUser:(0,h.getAuthUser)(e)}},k={setSelectedPhoto:f.setSelectedPhoto,trackCollectionButtonClick:f.trackCollectionButtonClick};t.default=(0,c.connect)(E,k)(O)},1520:function(e,t,n){"use strict";function o(e,t){return t.current_user_collections&&t.current_user_collections.length>0?"green":e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildToLink=void 0,t.inCollectionModifier=o;var a=n(34),r=n(19);t.buildToLink=function(e,t,n){var o=(0,a.getLocationQuery)(t),i=e?Object.assign({},o,{add_to_collection_view:"is_visible"}):Object.assign({},o,{login_view:"is_visible",login_action:"add_to_collection",login_from_photo:n.id});return{pathname:t.pathname,search:(0,r.buildSearchFromQuery)(i),state:t.state}}},1521:function(e,t){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",addIcon:"_2rdbO _2T3hc",label:"_1eyJo"}},1522:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadButton=void 0;var r=n(8),i=o(r),u=n(2),l=o(u),s=n(1),c=o(s),d=n(11),f=n(18),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),h=n(512),m=n(25),v=n(29),y=n(1487),_=o(y),b=n(299),g=n(59),w=o(g),P=n(516),T=o(P),O=n(33),E=o(O),k=n(1523),S=o(k),I={photo:l.default.object.isRequired,type:l.default.oneOf(["default","alt","green"]),showLabel:l.default.bool,showTooltip:l.default.bool,className:l.default.string,trackPhotoDownloadButtonClick:l.default.func.isRequired,showFixedBottomCard:l.default.func.isRequired,hideDownloadBottomBar:l.default.func.isRequired,label:l.default.string},R={type:"default",label:"Download"},C=t.DownloadButton=function(e){var t=e.photo,n=e.trackPhotoDownloadButtonClick,o=e.type,r=e.showLabel,u=e.showTooltip,l=e.className,s=e.showFixedBottomCard,d=e.hideDownloadBottomBar,f=e.label,p=function(){n(t),d(),m.safeLocalStorage.setItem(h.HAS_DOWNLOADED_A_PHOTO,""+!0);var e=new b.SayThanksCard(t.id);s(e)},y=r&&c.default.createElement("span",{className:S.default.label},f),g=c.default.createElement(E.default,{type:v.SvgType.download,className:(0,i.default)(S.default.downloadIcon,a({},S.default.labelIcon,r))}),P=function(){return c.default.createElement(T.default,{className:S.default.tooltip,tipPositionClassName:S.default.tooltipAnchorRight},c.default.createElement("div",{className:S.default.tooltipContents},"Click the ↓ to download this photo for free."))},O=(0,_.default)(P),k=function(){switch(o){case"default":return"outline";case"alt":return"outline-alt";case"green":return"green"}}();return c.default.createElement(w.default,{className:(0,i.default)(S.default.button,l),buttonType:k,buttonSize:"small",title:"Download photo",href:t.links.download+"?force=true",rel:"nofollow",download:!0,target:"_blank",track:p},c.default.createElement("span",null,u?c.default.createElement(O,null,g):g,y))};C.propTypes=I,C.defaultProps=R,C.displayName="DownloadButton";var D={trackPhotoDownloadButtonClick:p.trackPhotoDownloadButtonClick,showFixedBottomCard:p.showFixedBottomCard,hideDownloadBottomBar:p.hideDownloadBottomBar};t.default=(0,d.connect)(null,D)(C)},1523:function(e,t){e.exports={"--sm-min":"(--sm-min)",colorWhite:"#fff",button:"_1Tfeo",icon:"_11dQc",downloadIcon:"Apljk _11dQc",labelIcon:"_1Jd5C",label:"_2Aga-",tooltip:"_2wyvF",tooltipAnchorRight:"GMco6",tooltipContents:"_31KQ1"}},1524:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LikeButton=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(510);var s=n(8),c=o(s),d=n(2),f=o(d),p=n(1),h=o(p),m=n(11),v=n(16),y=n(511),_=n(18),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),g=n(34),w=n(29),P=n(19),T=n(51),O=n(68),E=o(O),k=n(59),S=o(k),I=n(33),R=o(I),C=n(1525),D=o(C),N={type:f.default.oneOf(["default","alt"]),photo:f.default.object.isRequired,location:f.default.object.isRequired,className:f.default.string,authUser:f.default.object,trackPhotoUnlike:f.default.func.isRequired,trackPhotoLike:f.default.func.isRequired,unlikePhoto:f.default.func.isRequired,likePhoto:f.default.func.isRequired,setSelectedPhoto:f.default.func.isRequired},M={type:"default"},j=t.LikeButton=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),l(t,[{key:"componentWillUnmount",value:function(){this.likesSubscription&&this.likesSubscription.unsubscribe()}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,n=e.location,o=e.photo,a=(0,g.getLocationQuery)(n),r=t?a:Object.assign({},a,{login_view:"is_visible",login_action:"like",login_from_photo:o.id});return{pathname:n.pathname,search:(0,P.buildSearchFromQuery)(r),state:n.state}}},{key:"isLikedModifier",value:function(){var e=this.props,t=e.photo,n=e.type,o="default"===n?"outline":"outline-alt";return t.liked_by_user?"pink":o}},{key:"buildClickHandler",value:function(){var e=this,t=this.props,n=t.photo,o=t.trackPhotoUnlike,a=t.trackPhotoLike,r=t.unlikePhoto,i=t.likePhoto,u=n.liked_by_user,l=u?E.default.photos.unlikePhoto:E.default.photos.likePhoto,s=u?o:a,c=u?r:i,d=v.Observable.defer(function(){return l(n.id)}).pipe((0,y.retry)(3));return function(t){t.preventDefault(),c(n.id),s(n),e.likesSubscription=d.subscribe()}}},{key:"renderLikesLabel",value:function(){var e=this.props.photo;return e.likes?h.default.createElement("span",{className:D.default.labelLike},e.likes):h.default.createElement("span",null)}},{key:"render",value:function(){var e=this.props,t=e.photo,n=e.setSelectedPhoto,o=e.trackPhotoLike,r=e.className,i=e.authUser,u=i?this.buildClickHandler():function(){n({id:t.id}),o(t)};return h.default.createElement(S.default,{className:(0,c.default)(D.default.buttonLike,r),buttonType:this.isLikedModifier(),tag:"link",title:"Like photo",buttonSize:"small",to:this.buildToLink(),onClick:u},h.default.createElement("span",null,h.default.createElement(R.default,{type:w.SvgType.heart,className:(0,c.default)(D.default.likeIcon,a({},D.default.likeIconLiked,t.liked_by_user))}),this.renderLikesLabel()))}}]),t}(p.Component);j.displayName="LikeButton",j.propTypes=N,j.defaultProps=M;var L=function(e){return{authUser:(0,T.getAuthUser)(e)}},B={trackPhotoUnlike:b.trackPhotoUnlike,trackPhotoLike:b.trackPhotoLike,unlikePhoto:b.unlikePhoto,likePhoto:b.likePhoto,setSelectedPhoto:b.setSelectedPhoto};t.default=(0,m.connect)(L,B)(j)},1525:function(e,t){e.exports={floatLeft:"_2T3hc",colorPink:"#f15151",colorWhite:"#fff",likeIcon:"BWSrD _2T3hc",likeIconLiked:"_1O_YD",labelLike:"_2ER2Y _2T3hc"}},1526:function(e,t,n){"use strict";function o(e){var t=e.downloadButtonXp,n=e.inFollowingFeed;return[l.Variant.showArrow,l.Variant.showBottomBar].includes(t)&&!n}function a(e){var t=u.safeLocalStorageHelpers.hasItem(i.HAS_DOWNLOADED_A_PHOTO),n=e.downloadButtonXp===l.Variant.showArrow;return o(e)&&n&&!t}function r(e){var t=e.downloadButtonXp,n=e.inFollowingFeed;return t===l.Variant.showWord&&!n}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHasWorkingHover=t.ActionsStates=void 0,t.checkShouldShowDownloadButton=o,t.checkShouldShowTooltip=a,t.checkShouldShowLabel=r;var i=n(512),u=n(25),l=n(513),s=t.ActionsStates=void 0;!function(e){e.All="All",e.DownloadButton="DownloadButton"}(s||(t.ActionsStates=s={}));var c=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream};t.checkHasWorkingHover=function(){return!c()}},1527:function(e,t){e.exports={floatLeft:"_2T3hc",floatRight:"_3pmDG","--sm-min":"(--sm-min)",colorLightGrey:"#ddd",hoverTransition:"_3XJBh",container:"_3vgBX",photo:"_1hz5D",imgPhoto:"KW7g_ _1hz5D",photoInfo:"bQJ8Z",photoInfoIsShown:"_2j4gG",photoInfoLink:"_23lr1",actionsTop:"_2yfpM",actionsBottom:"_1a5YS",userContainer:"CpQi5 _2T3hc",buttonDownloadContainer:"_3i-Ef _3pmDG",addToCollectionButtonContainer:"_3W6mQ"}},1532:function(e,t){e.exports={"--sm":"(--sm)","--md-min":"(--md-min)",colorGrey:"#999",colorDarkWhite:"#f5f5f5",colorLightBlack:"#111",headingXs:"_2uOAz",fontWeightSemibold:"_13Ib2",truncate:"_1ByhS",textDecorationNone:"_1CBrG",maxWidth:"750px",smallImagePercentage:"30%",bigImagePercentage:"70%",aspectRatioWrapper:"_2Dp1M",collectionContainer:"_28_Yu",linkWrapper:"fM0CB _1CBrG",imagesContainer:"_2zwgf",smallImagesContainer:"_2gO6E",image:"Kh8bw",bigImageWrapper:"_2vGrb",smallImageWrapper:"mTW0H",titleContainer:"_3zVYZ _1ByhS",iconPrivate:"_39uDR",title:"_2LKkn _2uOAz _13Ib2 _1ByhS",description:"_3-HBj _1ByhS",tagsContainer:"_3B1zT",smallTagContainer:"_1J1Oo"}},1552:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1553);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1553:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){return{totalHeight:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,photos:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}function l(e){var t=0,n=e[0];return e.forEach(function(e,o){e.totalHeight<n.totalHeight&&(t=o,n=e)}),t}function s(e){return Array.from({length:e}).map(function(){return u()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Masonry=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(8),f=o(d),p=n(2),h=o(p),m=n(1),v=o(m),y=n(11),_=n(18),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),g=n(204),w=n(121),P=n(203),T=n(513),O=n(1554),E=o(O),k=n(1560),S=n(1561),I=o(S),R={photos:h.default.array.isRequired,smallPhotoProps:h.default.object,windowWidth:h.default.number,downloadButtonXp:h.default.oneOf(Object.keys(T.Variant)),showDownloadBottomBar:h.default.func.isRequired,hideDownloadBottomBar:h.default.func.isRequired,shouldUseContainerPadding:h.default.bool},C={shouldUseContainerPadding:!0},D=t.Masonry=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={gridCount:(0,g.checkIsPhoneOrTablet)(e.windowWidth)?2:3},n.renderGrid=n.renderGrid.bind(n),n}return i(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.downloadButtonXp,n=e.showDownloadBottomBar;(0,k.checkShouldShowDownloadBottomBar)(t)&&n()}},{key:"componentWillUpdate",value:function(e){var t=this.props.windowWidth;e.windowWidth!==t&&((0,g.checkIsPhoneOrTablet)(e.windowWidth)?this.setState({gridCount:2}):this.setState({gridCount:3}))}},{key:"componentWillUnmount",value:function(){this.props.hideDownloadBottomBar()}},{key:"getGridData",value:function(e){var t=this.props.photos,n=s(e);return t.forEach(function(e){var t=n[l(n)];e.height&&e.width&&(t.totalHeight+=e.height/e.width,t.photos.push(e))}),n.map(function(e){return e.photos})}},{key:"renderGrid",value:function(e,t){var n=this.props,o=n.photos,a=n.smallPhotoProps,r=this.state.gridCount;return v.default.createElement("div",{key:t,ref:"MasonryGrid"+t,className:(0,f.default)(I.default.Grid,3===r&&I.default.GridThree,2===r&&I.default.GridTwo,1===r&&I.default.GridOne)},e.map(function(e,t){var n=o.indexOf(e);return v.default.createElement(E.default,{smallPhotoProps:a,gridCount:r,photo:e,position:n,key:t})}))}},{key:"render",value:function(){var e=this.state.gridCount,t=this.props.shouldUseContainerPadding,n=this.getGridData(e).map(this.renderGrid);return v.default.createElement("div",{id:"gridMulti",className:(0,f.default)(I.default.container,t&&I.default.containerWithPadding),"data-test":k.TEST_ATTRIBUTE},n)}}]),t}(m.Component);D.displayName="Masonry",D.propTypes=R,D.defaultProps=C;var N=function(e){return{windowWidth:(0,w.getWindowWidth)(e),downloadButtonXp:(0,P.getDownloadButtonXp)(e).orUndefined()}},M={showDownloadBottomBar:b.showDownloadBottomBar,hideDownloadBottomBar:b.hideDownloadBottomBar};t.default=(0,y.connect)(N,M)(D)},1554:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1555);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1555:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=o(a),i=n(1),u=o(i),l=n(11),s=n(1509),c=n(520),d=n(146),f=n(75),p=n(1517),h=o(p),m=n(1558),v=n(1559),y=o(v),_={smallPhotoProps:r.default.object,contentWidth:r.default.number,pixelRatio:r.default.number.isRequired,photo:r.default.object.isRequired,gridCount:r.default.number.isRequired},b=function(e){var t=e.smallPhotoProps,n=e.gridCount,o=e.contentWidth,a=e.pixelRatio,r=e.photo,i=Math.ceil(o/n-32),l=(0,f.getImageSizeAndImgixUrl)({photo:r,isMasonry:!0,parentWidth:i,pixelRatio:a}),s=l.imageUrl,c=l.imageWidth,d=l.imageHeight;return u.default.createElement("div",{className:y.default.photoContainer,"data-test":m.TEST_ATTRIBUTE},u.default.createElement(h.default,Object.assign({fillWidth:!0,showPhotoInfoOnHover:!0,width:c,height:d,imageUrl:s,photo:r},t)))};b.displayName="MasonryPhoto",b.propTypes=_;var g=function(e){return{contentWidth:(0,c.getContentWidth)(e),pixelRatio:(0,d.getPixelRatio)(e)}};t.default=(0,s.reportPhotoImpressions)((0,l.connect)(g)(b))},1556:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),c=(o(s),n(2)),d=o(c),f=n(1557),p=function(e){return"function"==typeof e},h=function(e){function t(){var e,n,o,a;r(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.state={inView:!1},o.node=null,o.handleNode=function(e){o.node&&(0,f.unobserve)(o.node),e&&(0,f.observe)(e,o.handleChange,o.props.threshold),o.node=e},o.handleChange=function(e){return o.setState({inView:e})},a=n,i(o,a)}return u(t,e),l(t,[{key:"componentWillUpdate",value:function(e,t){this.props.onChange&&t.inView!==this.state.inView&&(this.props.onChange(t.inView),t.inView&&e.unobserve)}},{key:"componentDidUpdate",value:function(e,t){t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,f.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,f.unobserve)(this.node),this.node=null)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,o=e.tag,r=(e.triggerOnce,e.threshold,a(e,["children","render","tag","triggerOnce","threshold"])),i=this.state.inView;return(0,s.createElement)(o,Object.assign({},r,{ref:this.handleNode}),i&&p(n)?n():null,p(t)?t(i):t)}}]),t}(s.Component);h.propTypes={tag:d.default.node,children:d.default.oneOfType([d.default.func,d.default.node]),triggerOnce:d.default.bool,threshold:d.default.number,onChange:d.default.func,render:d.default.func},h.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=h},1557:function(e,t,n){"use strict";function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&t){var o=u.get(n);o||(o=new IntersectionObserver(r,{threshold:n}),u.set(n,o)),i.set(e,{callback:t,visible:!1,threshold:n}),o.observe(e)}}function a(e){if(e){var t=i.get(e);if(t){i.delete(e);var n=u.get(t.threshold);n&&n.unobserve(e);var o=!1;i.forEach(function(e){e.threshold===t.threshold&&(o=!0)}),n&&!o&&(n.disconnect(),u.delete(t.threshold))}}}function r(e){e.forEach(function(e){if(i.has(e.target)){var t=e.isIntersecting,n=e.intersectionRatio,o=e.target,a=i.get(o),r=a.callback,u=a.visible,l=a.threshold,s=u?n>l:n>=l;void 0!==t&&(s=s&&t),i.set(o,{callback:r,visible:s,threshold:l}),r&&r(s)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.observe=o,t.unobserve=a;var i=new Map,u=new Map;t.default={observe:o,unobserve:a}},1558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photo-component"},1559:function(e,t){e.exports={"--sm-min":"(--sm-min)",photoContainer:"_1pn7R"}},1560:function(e,t,n){"use strict";function o(e){var t=r.safeLocalStorageHelpers.hasItem(a.HAS_DOWNLOADED_A_PHOTO);return e===i.Variant.showBottomBar&&!t}Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_ATTRIBUTE=void 0,t.checkShouldShowDownloadBottomBar=o;var a=n(512),r=n(25),i=n(513);t.TEST_ATTRIBUTE="photos-grid-view"},1561:function(e,t){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",clearfix:"_2TNYr",container:"_3_WtK _2TNYr",containerWithPadding:"_1C-lZ",Grid:"_1OvAL _2T3hc",GridThree:"_27nWV",GridTwo:"_1eGVY",GridOne:"_3nHtz"}},1571:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1576);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1572:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1573);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1573:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=o(a),i=n(1574),u=o(i),l=n(1579),s=n(1580),c=o(s),d=function(e){var t=e.collection;return r.default.createElement("div",{className:c.default.collectionContainer,"data-test":l.TEST_ATTRIBUTE},t?r.default.createElement(u.default,{collection:t}):r.default.createElement("div",null,r.default.createElement("div",{className:c.default.placeholderAspectRatioWrapper},r.default.createElement("div",{className:c.default.placeholderContainer},r.default.createElement("div",{className:c.default.placeholder}),r.default.createElement("div",{className:c.default.placeholderTextBox}),r.default.createElement("div",{className:c.default.placeholderTextBox2}))),r.default.createElement("div",{className:c.default.placeholderTextBox3})))};d.displayName="CollectionFeedCard",t.default=d},1574:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1575);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1575:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(20),r=n(517),i=o(r),u=n(1),l=o(u),s=n(11),c=n(28),d=n(518),f=n(25),p=n(58),h=n(202),m=n(29),v=n(51),y=n(33),_=o(y),b=n(534),g=o(b),w=n(1571),P=o(w),T=n(531),O=o(T),E=n(1578),k=n(1532),S=o(k),I=function(e){var t=e.collection,n=e.isLoggedIn,o=t.user,r=t.total_photos,u=t.preview_photos,s=t.private,v=t.tags,y=(0,f.buildCollectionTitle)(t),b=(0,h.buildCollectionUrl)(t),w=a.Option.of(u),T=(0,E.getImageSrces)(w,0,E.Size.full),k=(0,E.getImageSrces)(w,1,E.Size.half),I=(0,E.getImageSrces)(w,2,E.Size.half);return l.default.createElement("div",null,l.default.createElement("div",{className:S.default.aspectRatioWrapper},l.default.createElement("div",{className:S.default.collectionContainer},l.default.createElement(c.Link,{to:{pathname:b},className:S.default.linkWrapper},l.default.createElement("div",{className:S.default.imagesContainer},T.map(function(e){var t=e.src,n=e.srcSet;return l.default.createElement(g.default,{role:"presentation",containerClassName:S.default.bigImageWrapper,className:S.default.image,src:t,srcSet:n})}).getOrElse(l.default.createElement("div",{className:S.default.bigImageWrapper})),l.default.createElement("div",{className:S.default.smallImagesContainer},k.map(function(e){var t=e.src,n=e.srcSet;return l.default.createElement(g.default,{role:"presentation",containerClassName:S.default.smallImageWrapper,className:S.default.image,src:t,srcSet:n})}).getOrElse(l.default.createElement("div",{className:S.default.smallImageWrapper})),I.map(function(e){var t=e.src,n=e.srcSet;return l.default.createElement(g.default,{role:"presentation",containerClassName:S.default.smallImageWrapper,className:S.default.image,src:t,srcSet:n})}).getOrElse(l.default.createElement("div",{className:S.default.smallImageWrapper})))),l.default.createElement("div",{className:S.default.titleContainer},s&&l.default.createElement("span",{className:S.default.isPrivateContainer},l.default.createElement(O.default,{className:S.default.isPrivateTooltip,label:"This collection is private. To share, copy the URL or make the collection public.",width:200},l.default.createElement(_.default,{type:m.SvgType.lock,className:S.default.iconPrivate}))),l.default.createElement("div",{className:S.default.title},y))),l.default.createElement("div",{className:S.default.description},r," photos · Curated by"," ",n?l.default.createElement(c.Link,{to:(0,p.buildUserUrl)(o)},o.name):o.name))),l.default.createElement("div",{className:S.default.tagsContainer},(0,i.default)(v,3).map(function(e){var t=e.title;return l.default.createElement("div",{key:t,className:S.default.smallTagContainer},l.default.createElement(P.default,{tag:{title:t,url:(0,p.buildSearchUrlFromDecodedQuery)(t)},emplacement:d.TagEmplacement.CollectionCard}))})))};I.displayName="CollectionCard";var R=function(e,t){return{isLoggedIn:(0,v.getIsLoggedIn)(e)}};t.default=(0,s.connect)(R)(I)},1576:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=o(a),i=n(11),u=n(28),l=n(18),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(1577),d=o(c),f=function(e){var t=e.tag,n=e.emplacement,o=e.trackSearchSuggestionClick,a=t.title.toLowerCase();return r.default.createElement(u.Link,{className:d.default.smallTag,to:t.url,title:t.title+" images",onClick:function(){return o(a,n)}},t.title)};f.displayName="SmallTag";var p=function(){return{}},h={trackSearchSuggestionClick:s.trackSearchSuggestionClick};t.default=(0,i.connect)(p,h)(f)},1577:function(e,t){e.exports={smallTag:"_6PxCM"}},1578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImageSrces=t.Size=void 0;var o=n(148),a=n(524),r=n(147),i=n(1532),u=function(e){return e&&e.__esModule?e:{default:e}}(i),l=(0,o.pixelsToNumber)((0,o.getFormattedNumberFromStyles)({styles:u.default,className:"maxWidth",fallback:"200"})),s=t.Size=void 0;!function(e){e.full="full",e.half="half"}(s||(t.Size=s={}));var c=function(e){return e.urls.raw},d=function(e){switch(e){case s.full:return(0,o.percentageToRatio)((0,o.getFormattedNumberFromStyles)({styles:u.default,className:"bigImagePercentage",fallback:"50%"}));case s.half:return(0,o.percentageToRatio)((0,o.getFormattedNumberFromStyles)({styles:u.default,className:"smallImagePercentage",fallback:"50%"}))}},f=function(e){return function(t){return{src:(0,r.buildImgixUrlWithDefaults)(t)({w:l}),srcSet:(0,a.generateImgDensitySrcSetString)({baseUrl:t,width:l*d(e)})}}};t.getImageSrces=function(e,t,n){return e.mapN(function(e){return e[t]}).map(c).map(f(n))}},1579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="collection-feed-card"},1580:function(e,t){e.exports={"--sm":"(--sm)","--sm-min":"(--sm-min)","--md-min":"(--md-min)",colorLightGrey:"#ddd",placeholderBackground:"_2VWD4",gutter:"12px",oneHundrendPercent:"100%",fiftyPercent:"50%",collectionContainer:"_15M91",placeholderAspectRatioWrapper:"_2rCoL",placeholderContainer:"_3jSxL",placeholder:"_1X2ch _2VWD4",placeholderTextBox:"_3I0Nd _2VWD4",placeholderTextBox2:"mpqhr _2VWD4",placeholderTextBox3:"yxc4t _2VWD4",placeholderTextBox1:"_2pqeA _2VWD4"}},1653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=t.RelatedCollectionsType=void 0;!function(e){e.related="related",e.collected="collected"}(o||(t.RelatedCollectionsType=o={}));t.checkPhotoEntityHasFullInfo=function(e){return"related_collections"in e},t.checkPhotoEntityHasBasicInfo=function(e){return"description"in e},t.checkPhotoEntityHasStats=function(e){return"stats"in e}},1664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VIEW_MORE_ARROW_LIMIT=3,t.MAXIMUM_TITLE_TAGS_COUNT=4,t.MAXIMUM_RELATED_SEARCHES_COUNT=12},1690:function(e,t,n){"use strict";function o(e){return e.pipe((0,r.catchError)(function(e){if(l(e)||e instanceof a.AjaxResponse||e instanceof a.AjaxError){var t=e.xhr.response;null!==t&&(0,i.throwErrorsIfPresent)(t)}throw e}))}Object.defineProperty(t,"__esModule",{value:!0}),t.handleSearchAllResponse=t.checkIsAjaxNetworkError=t.checkIsMockAjaxResponse=t.IS_MOCK_AJAX_RESPONSE=void 0,t.throwErrorsInObservableIfPresent=o;var a=n(569),r=n(1691),i=n(69),u=t.IS_MOCK_AJAX_RESPONSE="IS_MOCK_AJAX_RESPONSE",l=t.checkIsMockAjaxResponse=function(e){return u in e};t.checkIsAjaxNetworkError=function(e){return e instanceof a.AjaxError&&"ajax error 0"===e.message},t.handleSearchAllResponse=function(e){return e.response}},1691:function(e,t,n){"use strict";function o(e){return function(t){var n=new u(e),o=t.lift(n);return n.caught=o}}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(101),i=n(100);t.catchError=o;var u=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.selector,this.caught))},e}(),l=function(e){function t(t,n,o){e.call(this,t),this.selector=n,this.caught=o}return a(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(i.subscribeToResult(this,n))}},t}(r.OuterSubscriber)},1697:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1698);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1698:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=o(a),i=n(1572),u=o(i),l=n(1699),s=o(l),c=function(e){var t=e.relatedCollections,n=e.heading;return 0===t.length?null:r.default.createElement("div",null,r.default.createElement("div",{className:s.default.clearfix},r.default.createElement("p",{className:s.default.heading},n)),r.default.createElement("div",{className:s.default.flexFeed},t.map(function(e,t){return r.default.createElement(u.default,{key:t,collection:e})})))};c.displayName="RelatedCollections",t.default=c},1699:function(e,t){e.exports={fontWeightNormal:"_27Bp2",gutterContainer:"_2npM8",clearfix:"yruyo",contentContainer:"_33G6- _2npM8",heading:"_2gjZV _33G6- _2npM8",flexFeed:"_3b8t6"}},1700:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1701);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1701:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=o(r),u=n(517),l=o(u),s=n(1),c=o(s),d=n(1664),f=n(518),p=n(540),h=o(p),m=n(1702),v=o(m),y={headingCopy:"Related searches",showHeading:!1,hideOnMobile:!1},_=function(e){var t=e.showHeading,n=e.keywords,o=e.hideOnMobile,r=e.headingCopy,u=(0,l.default)(n,d.MAXIMUM_RELATED_SEARCHES_COUNT);return 0===u.length?c.default.createElement("div",null):c.default.createElement("div",{className:(0,i.default)(v.default.container,a({},v.default.hideOnMobile,o))},t&&c.default.createElement("p",{className:v.default.heading},r),c.default.createElement("div",{className:v.default.tagsContainer},u.map(function(e){return c.default.createElement(h.default,{key:e.title,title:e.title,backgroundImage:e.url,size:p.TagSize.small,className:v.default.tagOverrides,emplacement:f.TagEmplacement.Related})})))};_.displayName="RelatedTags",_.defaultProps=y,t.default=_},1702:function(e,t){e.exports={"--sm-min":"(--sm-min)",clearfix:"_2KLco",mxn2:"_3hepI",containerLayout:"PrOBO",gutterContainer:"_2npM8",fontWeightNormal:"_27Bp2",container:"_3w_cF _2npM8 PrOBO",heading:"_2azK- _27Bp2",hideOnMobile:"_1Co2N",tagsContainer:"_18n5E",tagOverrides:"qr8Tb"}},1752:function(e,t){e.exports={outerHorizontalGutter:"17px",innerHorizontalGutter:"10px",cellPadding:"calc(10px / 2)",container:"_307c3",actions:"_3-6v7",cell:"_2iWc-",buttonCell:"_27vvN _2iWc-",photographer:"HAAez _2iWc-",downloadButtonCell:"_13Q- _27vvN _2iWc-",downloadButton:"_1AA_u"}},1753:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createHelpers=t.MainImageRenderType=void 0;var r=n(20),i=n(61),u=function(e){return e&&e.__esModule?e:{default:e}}(i),l=n(305),s=n(25),c=n(148),d=n(524),f=n(35),p=n(567),h=n(1752),m=o(h),v=n(1754),y=o(v);t.MainImageRenderType=(0,l.unionize)({Unenhanced:(0,l.ofType)(),Enhanced:(0,l.ofType)()}),t.createHelpers=function(e){var t=e.magicalVerticalOffset,n=function(){var e=(0,c.numberToPixels)(10),n=20+t,o=(0,c.pixelsToNumber)(m.outerHorizontalGutter);return{TOTAL_HORIZONTAL_PADDING:2*o,TOTAL_VERTICAL_PADDING:n,HORIZONTAL_PADDING_LENGTH:(0,c.numberToPixels)(o),VERTICAL_PADDING_LENGTH:e}},o=n(),i=o.TOTAL_HORIZONTAL_PADDING,l=o.TOTAL_VERTICAL_PADDING,h=function(){var e=n(),t=e.TOTAL_HORIZONTAL_PADDING,o=e.TOTAL_VERTICAL_PADDING;return{IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH:(0,c.createCssCalc)("100vw - "+(0,c.numberToPixels)(t)),IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH:(0,c.createCssCalc)("100vh - "+(0,c.numberToPixels)(o))}}(),v=h.IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH,_=h.IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH,b=function(e){return e.map(function(e){return(0,f.catMaybes)([e.mediaCondition,e.width]).join(" ")}).join(", ")},g=function(e){var t=e.photoDimensions,n=t.width,o=t.height,a=n/o,r=function(e){return Math.ceil(e*a)};return{lowerBound:r(500),upperBound:r(o)}},w=function(e){var t=e.photoDimensions,n=e.baseUrl,o=t.width,a=g({photoDimensions:t}),i=a.lowerBound,u=a.upperBound;return(0,d.generateImgWidthSrcSetString)({baseUrl:n,lowerBound:i,upperBound:u,originalWidth:o,interval:300,getParams:r.Option.some(function(){return{q:80}})})},P=function(e){var t=e.photoDimensions;if((0,p.isSquareOrPortraitPhoto)(t)){var n=t.width,o=t.height,a=n/o;return function(e){return Math.ceil(e*a)}(500)}return 500},T=function(e){var t=e.photoDimensions,n=t.width,o=t.height,a=n/o,r=P({photoDimensions:t});return{minWidthLength:(0,c.numberToPixels)(r),maxWidthLength:function(e){return(0,c.createCssCalc)("("+e+") * "+a)}(_)}},O=function(e){var t=e.photoDimensions,n=t.width,o=t.height,a=o/n,r=P({photoDimensions:t}),u=function(e){return Math.ceil(e*a)}(r);return{isMinSizeMediaConditions:["(max-width: "+(0,c.numberToPixels)(r+i)+")","(max-height: "+(0,c.numberToPixels)(u+l)+")"],isConstrainedByViewportHeightMediaCondition:"(min-aspect-ratio: "+n+"/"+o+")"}},E=function(){return[{mediaCondition:y.isFixedMediaCondition,width:"100vw"}]},k=function(e){var t=e.photoDimensions;if(e.isZoomedOut){var n=T({photoDimensions:t}),o=n.minWidthLength,r=n.maxWidthLength,i=O({photoDimensions:t}),u=i.isMinSizeMediaConditions,l=i.isConstrainedByViewportHeightMediaCondition;return[].concat(a(u.map(function(e){return{mediaCondition:e,width:o}})),[{mediaCondition:l,width:r},{width:v}])}return[{width:"100vw"}]},S=function(e){var t=e.photoDimensions,n=e.zoomableOptions;return[].concat(a(E()),a(k({photoDimensions:t,isZoomedOut:n.isZoomedOut})))},I=(0,u.default)(S,b);return{getPaddingConstants:n,getImgSrcSetString:w,getMinAndMaxWidthsLengths:T,getImgSizesString:I,createFallbackSrc:function(e){return(0,s.buildImgixUrlDEPRECATED)({url:e,width:String(1e3),q:"80"})}}}},1754:function(e,t){e.exports={resetBtn:"DWLeW",spacingUnit:"4px",center:"_3vQsl",isFixedMediaCondition:"(max-width: 767px)",isZoomableMediaCondition:"(min-width: 768px)",imagePlaceholder:"_2yFK-",imageContainer:"_1ac-D _3vQsl",imageButton:"_1szcv DWLeW",overlay:"_2MKkb",imageButtonZoomedIn:"_2-OhB",imageButtonZoomedOut:"_1YS_6",overlayChild:"_1w7cG",zoomToggleIcon:"_1NYtf",isFixed:"pADQw",isZoomable:"_2QvSN"}},1755:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2032);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},1995:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(1996);var s=n(20),c=n(1997),d=a(c),f=n(2),p=a(f),h=n(1),m=a(h),v=n(11),y=n(16),_=n(1691),b=n(1998),g=n(1999),w=n(613),P=n(206),T=n(2e3),O=n(612),E=n(2001),k=n(614),S=n(615),I=n(2002),R=n(616),C=n(156),D=n(305),N=n(18),M=o(N),j=n(25),L=n(34),B=n(98),x=n(60),A=n(51),U=n(310),F=n(617),W=n(618),H=n(553),q=o(H),G=n(1690),z=n(1653),V=n(541),Z=n(563),X=n(2003),K=a(X),Q=n(1753),Y=n(2030),J=a(Y),$=n(2038),ee=a($),te=n(2043),ne=function(e){return(0,G.throwErrorsInObservableIfPresent)(q.getRelatedPhotos({photoId:e}).pipe((0,P.map)(function(e){return e.response})))},oe=function(e){return(0,G.throwErrorsInObservableIfPresent)(q.getPhotoStats({photoId:e}).pipe((0,P.map)(function(e){return e.response})))},ae=(0,D.unionize)({Unenhanced:(0,D.ofType)(),Enhanced:(0,D.ofType)()}),re=(0,B.normalizeResponse)("photo"),ie=(0,B.normalizeResponse)("relatedPhotos"),ue=function(e){return s.Option.of(e.currentSrc).filter(j.isNonEmptyString).orElseL(function(){return s.Option.of(e.src).filter(j.isNonEmptyString)})},le=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resetNumberOfRequests=function(){n.resetNumberOfRequestsSubject.next({})},n.onRequestToggleTruncatedDescription=function(){var e=n.props.location;n.context.router.history.replace((0,L.updatePhotosPageLocationState)({location:e},function(e){return{shouldTruncateDescription:!e.shouldTruncateDescription}}))},n.state=n.getInitialState(),n.onRequestMainImageToggleZoom=n.onRequestMainImageToggleZoom.bind(n),n.onMainImageLoad=n.onMainImageLoad.bind(n),n.onRootRouteLeaveSubject=new C.Subject,n.onInfoRouteLeaveSubject=new C.Subject,n}return u(t,e),l(t,[{key:"getDefaultState",value:function(){return{mainImageCurrentSrc:s.Option.none()}}},{key:"getInitialState",value:function(){return Object.assign({},this.getDefaultState(),{renderType:ae.Unenhanced({})})}},{key:"getResetState",value:function(){return Object.assign({},this.getDefaultState(),{renderType:this.state.renderType})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.match,n=e.previousRenderWasByServer;this.setupProgressBar(),n||this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet(),t.params.subroute===Z.PhotoChildRoute.info&&this.fetchPhotoStatsThenCacheAndSet();var o=ae.Enhanced({});this.setState({renderType:o})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,o=n.match,a=n.maybePhoto,r=n.photoFullInfoRemoteData,i=n.photoStatsRemoteData,u=e.maybePhoto;o.params.id!==e.match.params.id?this.reset():u.forEach(function(e){a.map(function(t){return t!==e}).getOrElse(!0)&&(r.type===V.RemoteDataTypes.Success&&(0,z.checkPhotoEntityHasFullInfo)(e)&&t.updatePhotoFullInfoRemoteData(new V.Success(e)),i.type===V.RemoteDataTypes.Success&&(0,z.checkPhotoEntityHasStats)(e)&&t.updatePhotoStatsRemoteData(new V.Success(e.stats)))})}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.id,o=t.subroute,a=e.match.params,r=a.id,i=a.subroute;n!==r&&(this.cleanup(),this.fetchThenCacheAndSet());var u=i===Z.PhotoChildRoute.info,l=o===Z.PhotoChildRoute.info;!u&&l?this.fetchPhotoStatsThenCacheAndSet():u&&!l&&this.onInfoRouteLeaveSubject.next({})}},{key:"componentWillUnmount",value:function(){this.cleanup()}},{key:"setupProgressBar",value:function(){this.requestSubject=new C.Subject;var e=this.requestSubject.asObservable(),t=this.props,n=t.hideProgressBar,o=t.showProgressBar,a=function(e){return e>0},r=function(e){e?o():n()};this.resetNumberOfRequestsSubject=new C.Subject,this.resetNumberOfRequestsSubject.asObservable().pipe((0,S.startWith)({}),(0,I.switchMap)(function(){return e.pipe((0,O.mergeMap)(function(e){var t=y.Observable.of({}),n=e.pipe((0,g.count)());return t.pipe((0,T.mapTo)(1),(0,b.concat)(n.pipe((0,T.mapTo)(-1))))}),(0,E.scan)(d.default,0),(0,S.startWith)(0))})).pipe((0,P.map)(a),(0,w.distinctUntilChanged)()).subscribe(r)}},{key:"cleanup",value:function(){this.onRootRouteLeaveSubject.next({}),this.onInfoRouteLeaveSubject.next({})}},{key:"updatePhotoFullInfoRemoteData",value:function(e){var t=this.props;(0,t.updatePhotoFullInfoRemoteData)({photoId:t.match.params.id,photoFullInfoRemoteData:e})}},{key:"updateRelatedPhotoIdsRemoteData",value:function(e){var t=this.props;(0,t.updateRelatedPhotoIdsRemoteData)({photoId:t.match.params.id,relatedPhotoIdsRemoteData:e})}},{key:"updatePhotoStatsRemoteData",value:function(e){var t=this.props;(0,t.updatePhotoStatsRemoteData)({photoId:t.match.params.id,photoStatsRemoteData:e})}},{key:"reset",value:function(){this.setState(this.getResetState()),this.resetNumberOfRequests()}},{key:"fetchThenCacheAndSet",value:function(){var e=this,t=this.props,n=t.match,o=t.updateData,a=t.maybePhoto,r=t.setErrorFlash,i=t.relatedPhotoIdsRemoteData,u=n.params.id,l=this.context.router.history.replace;this.updatePhotoFullInfoRemoteData(new V.Loading);var s=(0,te.getPhotoWithInfo)(u).pipe((0,P.map)(function(e){return{normalizedResponse:re(e),remoteData:new V.Success(e)}}),(0,_.catchError)(function(e){return y.Observable.of({normalizedResponse:void 0,remoteData:new V.Failure(e)})}),(0,R.takeUntil)(this.onRootRouteLeaveSubject),(0,k.share)());s.subscribe(function(t){var n=t.normalizedResponse,i=t.remoteData;i.type===V.RemoteDataTypes.Failure&&((0,G.checkIsAjaxNetworkError)(i.value)?r({message:"There was a network error. Please check your internet connection."}):(r({message:"There was a server error. Please try again later."}),a.isEmpty()&&(0,x.handleClientSideError)(l)(i.value))),void 0!==n&&o(n.entities),e.updatePhotoFullInfoRemoteData(i)});var c=function(){switch(i.type){case V.RemoteDataTypes.Reloading:case V.RemoteDataTypes.Success:return new V.Reloading(i.value);case V.RemoteDataTypes.Failure:case V.RemoteDataTypes.Loading:case V.RemoteDataTypes.NotAsked:return new V.Loading}}();this.updateRelatedPhotoIdsRemoteData(c),this.requestSubject.next(s)}},{key:"fetchRelatedPhotosThenCacheAndSet",value:function(){var e=this,t=this.props,n=t.match,o=t.updateData,a=n.params.id,r=ne(a).pipe((0,P.map)(function(e){return{normalizedResponse:ie(e),remoteData:new V.Success(e.results.map(function(e){return e.id}))}}),(0,_.catchError)(function(e){return y.Observable.of({normalizedResponse:void 0,remoteData:new V.Failure(e)})}),(0,R.takeUntil)(this.onRootRouteLeaveSubject),(0,k.share)());r.subscribe(function(t){var n=t.normalizedResponse,a=t.remoteData;void 0!==n&&o(n.entities),e.updateRelatedPhotoIdsRemoteData(a)}),this.requestSubject.next(r)}},{key:"fetchPhotoStatsThenCacheAndSet",value:function(){var e=this,t=this.props,n=t.match,o=t.updatePhotoStats,a=n.params.id;this.updatePhotoStatsRemoteData(new V.Loading);var r=oe(a).pipe((0,P.map)(function(e){return{response:e,remoteData:new V.Success(e)}}),(0,_.catchError)(function(e){return y.Observable.of({response:void 0,remoteData:new V.Failure(e)})}),(0,R.takeUntil)(this.onInfoRouteLeaveSubject),(0,k.share)());r.subscribe(function(t){var n=t.response,r=t.remoteData;void 0!==n&&o(a,n),e.updatePhotoStatsRemoteData(r)}),this.requestSubject.next(r)}},{key:"onRequestMainImageToggleZoom",value:function(){this.trackToggleZoomableMainImageZoom(),this.toggleZoomableMainImageZoom()}},{key:"trackToggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,n=e.trackZoomedInPhoto,o=e.trackZoomedOutPhoto,a=e.match,r=a.params.id;(0,L.getPhotosPageLocationStateFromLocationWithDefault)({location:t}).zoomableMainImageOptions.isZoomedOut?n(r):o(r)}},{key:"toggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,n=e.pageModalScrollResetRequested,o=this.context.router.history;(0,L.checkIfLocationHasPageModal)(t)&&n(),o.replace((0,L.updatePhotosPageLocationState)({location:t},function(e){var t=e.zoomableMainImageOptions;return{zoomableMainImageOptions:Object.assign({},t,{isZoomedOut:!t.isZoomedOut})}}))}},{key:"onMainImageLoad",value:function(e){this.setState({mainImageCurrentSrc:ue(e.currentTarget)})}},{key:"renderChildRoute",value:function(){var e=this.props,t=e.match,n=e.location,o=e.maybePhoto,a=e.photoFullInfoRemoteData,r=e.photoStatsRemoteData,i=t.params.id,u=(0,L.getModalLocationStateFromLocation)(n),l=(0,L.getPhotosPageLocationStateFromLocationWithDefault)({location:n}),c=s.Option.of(l.initialSrc),d=t.params.subroute,f=(0,L.checkIfLocationIsBehindPageModal)(n),p=!f;switch(d){case Z.PhotoChildRoute.info:return u.filter(function(){return p}).map(function(e){return m.default.createElement(J.default,{maybeCachedPhoto:o,photoId:i,modalLocationState:e,maybeMainImageCurrentSrc:c,photoFullInfoRemoteData:a,photoStatsRemoteData:r})}).orUndefined();case Z.PhotoChildRoute.share:return u.filter(function(){return p}).map(function(e){return m.default.createElement(ee.default,{maybeCachedPhoto:o,photoId:i,modalLocationState:e,maybeMainImageCurrentSrc:c,photoFullInfoRemoteData:a})}).orUndefined();case void 0:return}}},{key:"render",value:function(){var e=this,t=this.props,n=t.maybePhoto,o=t.location,a=t.isLoggedIn,r=t.photoFullInfoRemoteData,i=t.relatedPhotoIdsRemoteData,u=this.state.renderType,l=(0,L.getPhotosPageLocationStateFromLocationWithDefault)({location:o}),c=l.shouldTruncateDescription,d=ae.match({Unenhanced:function(){return Q.MainImageRenderType.Unenhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut}})},Enhanced:function(){return Q.MainImageRenderType.Enhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut,onRequestToggleZoom:e.onRequestMainImageToggleZoom}})}})(u),f=s.Option.of(l.initialSrc);return m.default.createElement(K.default,{maybeCachedPhoto:n,location:o,photoFullInfoRemoteData:r,maybeMainImageInitialSrc:f,relatedPhotoIdsRemoteData:i,onMainImageLoad:this.onMainImageLoad,mainImageRenderType:d,shouldTruncateDescription:c,onRequestToggleTruncatedDescription:this.onRequestToggleTruncatedDescription,isLoggedIn:a},this.renderChildRoute())}}]),t}(h.PureComponent);le.contextTypes={router:p.default.object.isRequired};var se=function(){var e=(0,U.makeGetDenormalizedPhotoById)(),t=(0,F.makeGetPhotoFullInfoRemoteDataById)(),n=(0,F.makeGetRelatedPhotoIdsRemoteDataById)(),o=(0,F.makeGetPhotoStatsRemoteDataById)();return function(a,r){var i=r.match.params.id;return{maybePhoto:s.Option.of(e(a,i)),isLoggedIn:(0,A.getIsLoggedIn)(a),photoFullInfoRemoteData:t(a,{photoId:i}),relatedPhotoIdsRemoteData:n(a,{photoId:i}),photoStatsRemoteData:o(a,{photoId:i}),previousRenderWasByServer:(0,W.getPreviousRenderWasByServer)(a)}}},ce={updateData:M.updateData,updatePhotoStats:M.updatePhotoStats,setErrorFlash:M.setErrorFlash,trackZoomedInPhoto:M.trackZoomedInPhoto,trackZoomedOutPhoto:M.trackZoomedOutPhoto,showProgressBar:M.showProgressBar,hideProgressBar:M.hideProgressBar,pageModalScrollResetRequested:M.pageModalScrollResetRequested,updatePhotoFullInfoRemoteData:M.Actions.UPDATE_PHOTO_FULL_INFO_REMOTE_DATA,updateRelatedPhotoIdsRemoteData:M.Actions.UPDATE_RELATED_PHOTO_IDS_REMOTE_DATA,updatePhotoStatsRemoteData:M.Actions.UPDATE_PHOTO_STATS_REMOTE_DATA};t.default=(0,v.connect)(se,ce)(le)},1996:function(e,t,n){"use strict";var o=n(16),a=n(610);o.Observable.of=a.of},1997:function(e,t){function n(e,t){var n;return void 0===e&&void 0===t?0:(void 0!==e&&(n=e),void 0!==t&&(n=void 0===n?t:n+t),n)}e.exports=n},1998:function(e,t,n){"use strict";function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(a.concat.apply(void 0,[t].concat(e)))}}var a=n(611);t.concat=o},1999:function(e,t,n){"use strict";function o(e){return function(t){return t.lift(new i(e,t))}}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(36);t.count=o;var i=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.predicate,this.source))},e}(),u=function(e){function t(t,n,o){e.call(this,t),this.predicate=n,this.source=o,this.count=0,this.index=0}return a(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(r.Subscriber)},2e3:function(e,t,n){"use strict";function o(e){return function(t){return t.lift(new i(e))}}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(36);t.mapTo=o;var i=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.value))},e}(),u=function(e){function t(t,n){e.call(this,t),this.value=n}return a(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(r.Subscriber)},2001:function(e,t,n){"use strict";function o(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(o){return o.lift(new i(e,t,n))}}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(36);t.scan=o;var i=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.hasSeed))},e}(),u=function(e){function t(t,n,o,a){e.call(this,t),this.accumulator=n,this._seed=o,this.hasSeed=a,this.index=0}return a(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(r.Subscriber)},2002:function(e,t,n){"use strict";function o(e,t){return function(n){return n.lift(new u(e,t))}}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(101),i=n(100);t.switchMap=o;var u=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.resultSelector))},e}(),l=function(e){function t(t,n,o){e.call(this,t),this.project=n,this.resultSelector=o,this.index=0}return a(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var o=this.innerSubscription;o&&o.unsubscribe(),this.add(this.innerSubscription=i.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,o,a){this.resultSelector?this._tryNotifyNext(e,t,n,o):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,n,o){var a;try{a=this.resultSelector(e,t,n,o)}catch(e){return void this.destination.error(e)}this.destination.next(a)},t}(r.OuterSubscriber)},2003:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2004);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2004:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),i=n(1),u=o(i),l=n(297),s=o(l),c=n(590),d=o(c),f=n(34),p=n(202),h=n(2005),m=n(1653),v=n(541),y=n(515),_=o(y),b=n(2007),g=n(2008),w=o(g),P=n(2019),T=o(P),O=n(2021),E=o(O),k=n(2023),S=o(k),I=n(2029),R=o(I),C=function(e){var t=e.location,n=e.maybeCachedPhoto,o=e.photoFullInfoRemoteData,a=e.maybeMainImageInitialSrc,i=e.relatedPhotoIdsRemoteData,l=e.onMainImageLoad,c=e.shouldTruncateDescription,d=e.onRequestToggleTruncatedDescription,y=e.isLoggedIn,g=e.children,P=e.mainImageRenderType,O=function(e){var n=e.photo,o=(0,h.buildPhotoHeadTags)(n),m=o.title,v=o.meta,_=o.canonicalUrl,b=(0,f.checkIfLocationHasPageModal)(t),g=b?155:200;return u.default.createElement("div",{className:R.default.wrapper},u.default.createElement(s.default,{title:m,meta:v,link:(0,p.buildLinks)(_)}),u.default.createElement("div",null,u.default.createElement("div",{className:(0,r.default)(b&&R.default.stickyHeaderContainer)},u.default.createElement(T.default,{photo:n,location:t,isLoggedIn:y})),u.default.createElement(E.default,{renderType:P,maybeInitialSrc:a,photo:n,onImgLoad:l,magicalVerticalOffset:g}),u.default.createElement(w.default,{photo:n,location:t,shouldTruncateDescription:c,onRequestToggleTruncatedDescription:d})),u.default.createElement("div",{className:R.default.container},u.default.createElement(S.default,{photo:n,relatedPhotoIdsRemoteData:i})))},k=function(){return u.default.createElement("div",{className:R.default.spinnerWrapper},u.default.createElement(_.default,{padContentBelow:!1}))},I=function(){return n.filter(m.checkPhotoEntityHasBasicInfo).map(function(e){return O({photo:e})}).getOrElseL(function(){switch(o.type){case v.RemoteDataTypes.Reloading:case v.RemoteDataTypes.Success:return O({photo:o.value});case v.RemoteDataTypes.Loading:return k();case v.RemoteDataTypes.NotAsked:case v.RemoteDataTypes.Failure:return null}})}();return function(e){return u.default.createElement("div",{"data-test":b.TEST_ATTRIBUTE},e,g)}(I)};C.displayName="Photos",t.default=(0,d.default)(C)},2005:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,v.default)(e,y.MAXIMUM_TITLE_TAGS_COUNT),n=t.map(function(e){return e.title});return(0,c.default)(n)}function r(e,t){var n=(0,h.default)(t,"story.title"),o="photo by "+e.name+" (@"+e.username+") on Unsplash";if(n)return(0,f.default)(n+" "+o);if(t.tags){var r=a(t.tags);return(0,f.default)(r+" HD "+o)}return"HD "+o}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.cleanVersion,r=void 0!==o&&o,i=[r?"Download this photo":"Download this free HD photo"];if(t.tags&&!r){var u=a(t.tags);i.push("of",u)}if((0,h.default)(t,"location.city")||(0,h.default)(t,"location.country")){var l=[t.location.city,t.location.country],s=l.filter(function(e){return!!e}).join(", ");i.push("in "+s)}return i.push("by "+e.name+" (@"+e.username+")"),i.join(" ")}function u(e){var t=e.id,n=e.slug;return"https://unsplash.com/photos/"+(n?t+"/"+n:t)}function l(e){var t=e.user,n=r(t,e),o=i(t,e),a=u(e),l=i(t,e,{cleanVersion:!0});return{title:n,description:o,canonicalUrl:a,meta:(0,_.buildPhotoMeta)(t,e,n,o,l,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildPhotoHeadTags=l;var s=n(2006),c=o(s),d=n(536),f=o(d),p=n(52),h=o(p),m=n(517),v=o(m),y=n(1664),_=n(202)},2006:function(e,t){/*!
 * array-to-sentence | MIT (c) Shinnosuke Watanabe
 * https://github.com/shinnn/array-to-sentence
*/
e.exports=function(e,t){"use strict";function n(e){if("string"!=typeof t[e])throw new TypeError(String(t[e])+" is not a string. `"+e+"` option must be a string.")}if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array. Expected an array.");return t=t||{},void 0===t.separator?t.separator=", ":n("separator"),void 0===t.lastSeparator?t.lastSeparator=" and ":n("lastSeparator"),0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(t.separator)+t.lastSeparator+e[e.length-1]}},2007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photos-route"},2008:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2009);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2009:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(20),r=n(1),i=o(r),u=n(28),l=n(58),s=n(29),c=n(570),d=n(1653),f=n(33),p=o(f),h=n(563),m=n(2010),v=o(m),y=n(2016),_=o(y),b=n(2018),g=o(b),w=function(e){return i.default.createElement("div",{className:g.default.textContainerItem},e)},P=function(e){var t=e.photo,n=e.location,o=e.shouldTruncateDescription,r=e.onRequestToggleTruncatedDescription,f={pathname:(0,h.getPhotoInfoRoute)({photoId:t.id}),state:n.state},m={pathname:(0,h.getPhotoShareRoute)({photoId:t.id}),state:n.state},y=(0,d.checkPhotoEntityHasFullInfo)(t)?a.Option.of(t.story.description):a.Option.none(),b=(0,d.checkPhotoEntityHasFullInfo)(t)?a.Option.of(t.location).map(function(e){return e.title}):a.Option.none(),P=(0,c.getCreditText)(t.user),T={url:t.links.html,title:a.Option.of(t.description).getOrElse(""),text:P};return i.default.createElement("div",{className:g.default.container},i.default.createElement("div",{className:g.default.textContainer},b.map(function(e){return i.default.createElement(u.Link,{to:(0,l.buildSearchUrlFromDecodedQuery)(e),className:g.default.locationLink},i.default.createElement(p.default,{type:s.SvgType.location,className:g.default.locationIcon}),i.default.createElement("span",{className:g.default.locationTitle},e))}).map(w).orUndefined(),y.map(function(e){return i.default.createElement(v.default,{description:e,shouldTruncate:o,onRequestToggleTruncation:r})}).map(w).orUndefined()),i.default.createElement(_.default,{shareLocationDescriptor:m,shareOptions:T,buttonProps:{className:g.default.shareButton},linkProps:{className:g.default.shareLink}},i.default.createElement(p.default,{className:g.default.linkIcon,type:s.SvgType.share}),i.default.createElement("span",{className:g.default.linkText},"Share")),i.default.createElement(u.Link,{className:g.default.action,to:f},i.default.createElement(p.default,{className:g.default.linkIconWithPadding,type:s.SvgType.info}),i.default.createElement("span",{className:g.default.linkText},"Info")))};P.displayName="Footer",t.default=P},2010:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2011);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2011:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=o(a),i=n(619),u=n(2012),l=o(u),s=n(2015),c=o(s),d=function(e){var t=e.description,n=e.shouldTruncate,o=e.onRequestToggleTruncation;return r.default.createElement(l.default,{key:t,text:t,containerClassNameTruncationNotRequired:c.default.descriptionTruncationNotRequired,containerClassNameExpanded:c.default.descriptionExpanded,containerClassNameTruncated:c.default.descriptionTruncated,shouldTruncateIfRequired:n,shouldShowTruncateButtonWhenExpanded:!1,onRequestToggle:o})};t.default=(0,i.progressiveEnhancement)(d)},2012:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2013);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2013:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(8),s=o(l),c=n(20),d=n(1),f=o(d),p=n(305),h=n(2014),m=o(h),v=(0,p.unionize)({NotRequired:(0,p.ofType)(),Truncated:(0,p.ofType)(),Expanded:(0,p.ofType)()}),y=function(e,t){var n=e.onRequestToggle,o=e.shouldTruncateIfRequired,a=e.shouldShowTruncateButtonWhenExpanded,r=t.doesRequireTruncation,i=t.shouldForceTruncation;return r?i||o?v.Truncated({onRequestToggle:n}):v.Expanded({onRequestToggle:n,shouldShowTruncateButton:a}):v.NotRequired({})},_=function(e){return e.offsetWidth<e.scrollWidth},b=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateRef=function(e){n.textElRef=e},n.state=n.getInitialState(),n}return i(t,e),u(t,[{key:"getInitialState",value:function(){return{doesRequireTruncation:!0,shouldForceTruncation:!0}}},{key:"componentDidMount",value:function(){var e=this,t=function(){var t=c.Option.of(e.textElRef).get();return _(t)}();this.setState({doesRequireTruncation:t,shouldForceTruncation:!1})}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.containerClassNameTruncated,o=e.containerClassNameExpanded,a=e.containerClassNameTruncationNotRequired,r=y(this.props,this.state),i=v.match({Truncated:function(e){var t=e.onRequestToggle;return c.Option.some({buttonText:"Read more",onRequestToggle:t})},Expanded:function(e){var t=e.onRequestToggle;return e.shouldShowTruncateButton?c.Option.some({buttonText:"Show less",onRequestToggle:t}):c.Option.none()},NotRequired:function(){return c.Option.none()}})(r);return f.default.createElement("div",{className:(0,s.default)(m.default.container,v.match({Truncated:function(){return[m.default.containerTruncated,n]},Expanded:function(){return[o]},NotRequired:function(){return[a]}})(r))},f.default.createElement("p",{ref:this.updateRef,className:(0,s.default)(m.default.text,v.match({Truncated:function(){return m.default.textTruncated}},function(){return m.default.textNotTruncated})(r))},t)," ",i.map(function(e){var t=e.buttonText,n=e.onRequestToggle;return f.default.createElement("button",{className:m.default.toggleButton,onClick:n},t)}).orUndefined())}}]),t}(d.PureComponent);b.displayName="TruncatedTextToggle",t.default=b},2014:function(e,t){e.exports={truncate:"_1ByhS",resetBtn:"DWLeW",containerTruncated:"_3PLD4",text:"KNDj7",textNotTruncated:"_2FfeD",textTruncated:"b5rtm _1ByhS",toggleButton:"_19oEl DWLeW",expandButton:"_2mJKr"}},2015:function(e,t){e.exports={colorGrey:"#999",colorLightBlack:"#111",descriptionExpanded:"_2tqNT",descriptionTruncationNotRequired:"_1fn3S",descriptionTruncated:"_3kvp0"}},2016:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2017);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2017:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(20),l=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(28),d=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getInitialState(),n}return r(t,e),i(t,[{key:"getInitialState",value:function(){var e=this;return{maybeShareFunction:("undefined"!=typeof window?u.Option.some(window):u.Option.none()).chain(function(e){return void 0!==e.navigator.share?u.Option.some(function(t){return e.navigator.share(t)}):u.Option.none()}).map(function(t){var n=e.props.shareOptions;return function(){return t(n)}})}}},{key:"render",value:function(){var e=this.props,t=e.shareLocationDescriptor,n=e.children,o=e.buttonProps,a=e.linkProps;return this.state.maybeShareFunction.map(function(e){return s.default.createElement("button",Object.assign({onClick:e},o),n)}).getOrElseL(function(){return s.default.createElement(c.Link,Object.assign({to:t},a),n)})}}]),t}(l.PureComponent);t.default=d},2018:function(e,t){e.exports={spacingUnit:"4px",resetBtn:"DWLeW",colorLightBlack:"#111",truncate:"_1ByhS",fontWeightMedium:"xLon9",smallFontSize:"12px",link:"_1dUIs",container:"_1ltEq",halfCell:"_3kEvh",textContainer:"_2DxLe _3kEvh",textContainerNotTruncated:"gfzKD",textContainerTruncated:"OD7Kw",textContainerItem:"_28uSB _3kEvh",locationLink:"_2RL3a xLon9",locationIcon:"_15of1",locationTitle:"_20NLS _1ByhS",action:"_2wtkH _3kEvh xLon9",linkIcon:"zW0jE",linkIconWithPadding:"H7PLe zW0jE _3kEvh",linkText:"_1S-Rs _3kEvh",shareLinkOrButton:"P_Gsg _2wtkH _3kEvh xLon9",shareLink:"_20YfC P_Gsg _2wtkH _3kEvh xLon9",shareButton:"_1giCj DWLeW P_Gsg _2wtkH _3kEvh xLon9 _1dUIs"}},2019:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2020);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2020:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),i=n(1),u=o(i),l=n(1493),s=o(l),c=n(1494),d=o(c),f=n(1495),p=o(f),h=n(1488),m=o(h),v=n(1752),y=o(v),_=function(e){var t=e.className,n=e.location,o=e.photo,a=e.isLoggedIn,i=a?void 0:"green",l=a?"Download":"Download free";return u.default.createElement("header",{className:(0,r.default)(t,y.default.container)},u.default.createElement("div",{className:y.default.photographer},u.default.createElement(m.default,{includeAvatar:!0,user:o.user,secondaryLink:{label:"@"+o.user.username,href:o.user.links.html},type:"emphasiseUsername"})),u.default.createElement("div",{className:y.default.actions},u.default.createElement("div",{className:y.default.buttonCell},u.default.createElement(p.default,{photo:o,location:n})),u.default.createElement("div",{className:y.default.buttonCell},u.default.createElement(s.default,{photo:o,location:n})),u.default.createElement("div",{className:y.default.downloadButtonCell},u.default.createElement(d.default,{photo:o,showLabel:!0,showTooltip:!1,type:i,label:l,className:y.default.downloadButton}))))};t.default=_},2021:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2022);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2022:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(8),s=o(l),c=n(20),d=n(1),f=o(d),p=n(148),h=n(524),m=n(29),v=n(33),y=o(v),_=n(534),b=o(_),g=n(1753),w=n(1754),P=o(w),T=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderZoomableImageOverlay=function(e){var t=e.isZoomedOut,n=t?m.SvgType.zoomIn:m.SvgType.zoomOut;return f.default.createElement("div",{className:P.default.overlay},f.default.createElement("div",{className:P.default.overlayChild},f.default.createElement(y.default,{type:n,className:P.default.zoomToggleIcon})))},n.renderImage=function(){var e=n.props,t=e.photo,o=e.maybeInitialSrc,a=e.onImgLoad,r=e.magicalVerticalOffset,i=e.renderType,u=n.state.shouldUseInitialSrcIfAvailable,l=t.urls.raw,s=(0,g.createHelpers)({magicalVerticalOffset:r}),d=s.getImgSizesString,m=s.getImgSrcSetString,v=s.createFallbackSrc,y=t.width,_=t.height,w={width:y,height:_},T=_/y,O=(0,p.ratioToPercentage)(T),E=d({zoomableOptions:i.zoomable,photoDimensions:w}),k=function(){return m({photoDimensions:w,baseUrl:l})},S=u?o.map(function(e){return(0,h.serializeSrcSet)([{url:e}])}).getOrElseL(k):k(),I=v(l);return f.default.createElement(b.default,{containerClassName:P.default.imagePlaceholder,containerStyle:{paddingBottom:O},key:t.id,sizes:E,srcSet:S,onLoad:a,src:I,alt:c.Option.of(t.description).orUndefined()})},n.renderZoomableImageButton=function(e){var t=e.isZoomedOut,o=e.onRequestToggleZoom,a=(0,s.default)(P.default.imageButton,t?P.default.imageButtonZoomedOut:P.default.imageButtonZoomedIn);return f.default.createElement("button",{className:a,onClick:o},n.renderZoomableImageOverlay(e),n.renderImage())},n.renderZoomableImageContainer=function(){var e=n.props,t=e.photo,o=e.magicalVerticalOffset,a=e.renderType,r=(0,g.createHelpers)({magicalVerticalOffset:o}),i=r.getMinAndMaxWidthsLengths,u=r.getPaddingConstants,l=a.zoomable.isZoomedOut,s=u(),c=s.HORIZONTAL_PADDING_LENGTH,d=s.VERTICAL_PADDING_LENGTH,p=t.width,h=t.height,m={width:p,height:h},v=i({photoDimensions:m}),y=v.minWidthLength,_=v.maxWidthLength;return f.default.createElement("div",{style:l?{padding:d+" "+c}:{}},f.default.createElement("div",{style:l?{minWidth:y,maxWidth:_}:{},className:P.default.imageContainer},g.MainImageRenderType.match({Unenhanced:n.renderImage,Enhanced:function(e){return n.renderZoomableImageButton(e.zoomable)}})(a)))},n.state=n.getInitialState(),n}return i(t,e),u(t,[{key:"getInitialState",value:function(){return{shouldUseInitialSrcIfAvailable:!0}}},{key:"componentDidMount",value:function(){this.disableInitialSrc()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.photo;e.photo.id!==t.id&&this.setState(this.getInitialState)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.shouldUseInitialSrcIfAvailable&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.state.shouldUseInitialSrcIfAvailable&&e.disableInitialSrc()})})}},{key:"disableInitialSrc",value:function(){this.setState({shouldUseInitialSrcIfAvailable:!1})}},{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement("div",{className:P.default.isFixed},this.renderImage()),f.default.createElement("div",{className:P.default.isZoomable},this.renderZoomableImageContainer()))}}]),t}(d.PureComponent);t.default=T},2023:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2024);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2024:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(20),r=n(1),i=o(r),u=n(1653),l=n(1697),s=o(l),c=n(1700),d=o(c),f=n(2025),p=o(f),h=function(e){var t=e.type===u.RelatedCollectionsType.related?"Related collections":"Featured in "+e.total+" collections";return i.default.createElement(s.default,{relatedCollections:e.results,heading:t})},m=function(e){var t=e.photo,n=e.relatedPhotoIdsRemoteData,o=a.Option.of((0,u.checkPhotoEntityHasFullInfo)(t)?t.related_collections:void 0),r=(0,u.checkPhotoEntityHasFullInfo)(t)?a.Option.some(t.tags):a.Option.none();return i.default.createElement("div",null,i.default.createElement(p.default,{photoIdsRemoteData:n}),o.map(h).getOrElse(void 0),r.map(function(e){return i.default.createElement(d.default,{headingCopy:"Related tags",keywords:e,showHeading:!0})}).orUndefined())};t.default=m},2025:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2026);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2026:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=o(a),i=n(2027),u=n(541),l=n(1552),s=o(l),c=n(515),d=o(c),f=n(2028),p=o(f),h=(0,i.mapPhotoIdsToPhotos)(s.default),m=function(e){var t=e.photoIdsRemoteData,n=function(e){var t=e.bodyPhotoIdsRemoteData;switch(t.type){case u.RemoteDataTypes.Reloading:case u.RemoteDataTypes.Success:return r.default.createElement(h,{photoIds:t.value,shouldUseContainerPadding:!1});case u.RemoteDataTypes.Loading:return r.default.createElement(d.default,{padContentBelow:!1})}},o=function(e){var t=e.bodyPhotoIdsRemoteData;return r.default.createElement("div",null,r.default.createElement("div",{className:p.default.clearfix},r.default.createElement("h4",{className:p.default.heading},"Related photos")),r.default.createElement("div",{className:p.default.contentContainer},n({bodyPhotoIdsRemoteData:t})))};switch(t.type){case u.RemoteDataTypes.Reloading:case u.RemoteDataTypes.Loading:return o({bodyPhotoIdsRemoteData:t});case u.RemoteDataTypes.Success:return 0===t.value.length?null:o({bodyPhotoIdsRemoteData:t});case u.RemoteDataTypes.Failure:case u.RemoteDataTypes.NotAsked:return null}};t.default=m},2027:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapPhotoIdsToPhotos=void 0;var o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),r=n(11),i=n(554),u=n(310);t.mapPhotoIdsToPhotos=function(e){var t=function(t){return a.default.createElement(e,Object.assign({},t,{photos:t.photos}))};t.displayName="MapPhotoIdsToPhotos("+(0,i.getDisplayName)(e)+")";var n=function(){var e=(0,u.makeGetDenormalizedPhotoByIds)();return function(t,n){return{photos:e(t,n.photoIds)}}};return(0,r.connect)(n)(t)}},2028:function(e,t){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_1zDIT _2npM8",heading:"_1-q17 _2npM8 _27Bp2"}},2029:function(e,t){e.exports={containerLayout:"PrOBO",wrapper:"WMwuA",container:"_1OYbO PrOBO",stickyHeaderContainer:"_33qjA",spinnerWrapper:"xn9xU"}},2030:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2031);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2031:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=o(a),i=n(1653),u=n(1755),l=o(u),s=n(2034),c=o(s),d=function(e){var t=e.maybeCachedPhoto,n=e.photoId,o=e.maybeMainImageCurrentSrc,a=e.photoFullInfoRemoteData,u=e.photoStatsRemoteData,s=e.modalLocationState,d=t.filter(i.checkPhotoEntityHasBasicInfo).map(function(e){return e.urls.raw});return r.default.createElement(l.default,{photoId:n,modalLocationState:s,maybeMainImageCurrentSrc:o,maybeRawPhotoUrl:d},r.default.createElement(c.default,{maybeCachedPhoto:t,photoFullInfoRemoteData:a,photoStatsRemoteData:u}))};t.default=d},2032:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=o(a),i=n(25),u=n(620),l=o(u),s=n(2033),c=o(s),d=function(e){return{backgroundImage:["linear-gradient(hsla(0, 0%, 100%, 0.8), white 150px)",(0,i.urlToBackgroundImage)(e)].join(", ")}},f=function(e){var t=e.maybeRawPhotoUrl,n=e.maybeMainImageCurrentSrc,o=function(e){return(0,i.buildImgixUrlDEPRECATED)({url:e,width:String(200),blur:String(20)})};return t.map(o).orElse(n)},p=function(e){var t=e.photoId,n=e.maybeRawPhotoUrl,o=e.maybeMainImageCurrentSrc,a=e.modalLocationState,i=e.children,u=f({maybeRawPhotoUrl:n,maybeMainImageCurrentSrc:o});return r.default.createElement(l.default,{redirectTo:{pathname:"/photos/"+t},modalLocationState:a,contentStyles:u.map(d).orUndefined(),contentClassName:c.default.modalContent},i)};t.default=p},2033:function(e,t){e.exports={modalContent:"_29NeT"}},2034:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2035);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2035:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(20),i=n(1),u=o(i),l=n(11),s=n(25),c=n(35),d=n(29),f=n(51),p=n(1653),h=n(541),m=n(75),v=n(33),y=o(v),_=n(515),b=o(_),g=n(2036),w=n(2037),P=o(w);!function(e){e[e.views=0]="views",e[e.downloads=1]="downloads",e[e.likes=2]="likes"}(a||(a={}));var T=function(e){switch(e){case a.views:return d.SvgType.eyeThin;case a.downloads:return d.SvgType.downloadArrowThin;case a.likes:return d.SvgType.heartThin}},O=function(e){switch(e){case a.views:return"Views";case a.downloads:return"Downloads";case a.likes:return"Likes"}},E=function(){return u.default.createElement("div",{className:P.default.container},u.default.createElement("div",{className:P.default.cell},u.default.createElement(b.default,{padContentBelow:!1})))},k=function(e){var t=e.statRemoteData;switch(t.type){case h.RemoteDataTypes.Success:var n=t.value;return u.default.createElement("dd",{className:P.default.statValue},u.default.createElement("span",{className:P.default.statValueTotal},(0,s.formatNumber)(n.total)),u.default.createElement("span",{className:P.default.statValueDelta},(0,s.formatNumberWithSign)(n.historical.change)," since last month"));case h.RemoteDataTypes.Loading:return u.default.createElement("dd",{className:P.default.statValue},u.default.createElement("div",{className:P.default.statValueTotalPlaceholder}),u.default.createElement("div",{className:P.default.statValueDeltaPlaceholder}))}},S=function(e){var t=e.type,n=e.statRemoteData;return u.default.createElement("div",{className:P.default.stat},u.default.createElement("dt",{className:P.default.statLabel},u.default.createElement(y.default,{type:T(t),className:P.default.statLabelIcon}),u.default.createElement("span",{className:P.default.statLabelText},O(t))),k({statRemoteData:n}))},I=function(e){return u.default.createElement("dl",{key:"stats-body",className:P.default.stats},S({type:a.views,statRemoteData:e.views}),S({type:a.downloads,statRemoteData:e.downloads}),S({type:a.likes,statRemoteData:e.likes}))},R=function(e){return u.default.createElement("div",{key:"stats-failure",className:P.default.container},u.default.createElement("div",{className:P.default.cell},u.default.createElement("p",{className:P.default.p},"Sorry, there was an error loading stats. Please try again later.")))},C=function(e){var t=e.maybeCachedPhotoStats,n=e.photoStatsRemoteData;return t.map(function(e){return I({views:new h.Success(e.views),downloads:new h.Success(e.downloads),likes:new h.Success(e.likes)})}).orElseL(function(){switch(n.type){case h.RemoteDataTypes.NotAsked:return r.Option.none();case h.RemoteDataTypes.Failure:return r.Option.some(R(n.value));case h.RemoteDataTypes.Reloading:case h.RemoteDataTypes.Success:var e=n.value;return r.Option.some(I({views:new h.Success(e.views),downloads:new h.Success(e.downloads),likes:new h.Success(e.likes)}));case h.RemoteDataTypes.Loading:return r.Option.some(I({views:new h.Loading,downloads:new h.Loading,likes:new h.Loading}))}})},D=function(e){var t=e.photo,n=(0,g.getMetadata)({photo:t});return u.default.createElement("dl",{key:"metadata-body",className:P.default.metadata},n.map(function(e){var t=e.name,n=e.value;return u.default.createElement("div",{key:t,className:P.default.metadataItem},u.default.createElement("dt",{className:P.default.metadataItemName},t),u.default.createElement("dd",{className:P.default.metadataItemValue},n))}))},N=function(e){return u.default.createElement("div",{key:"metadata-failure",className:P.default.container},u.default.createElement("div",{className:P.default.cell},u.default.createElement("p",{className:P.default.p},"Sorry, there was an error loading metadata. Please try again later.")))},M=function(e){var t=e.cachedPhoto,n=e.photoFullInfoRemoteData;return(0,p.checkPhotoEntityHasFullInfo)(t)?r.Option.some(D({photo:t})):function(){switch(n.type){case h.RemoteDataTypes.Reloading:case h.RemoteDataTypes.Success:return r.Option.some(D({photo:n.value}));case h.RemoteDataTypes.Loading:return r.Option.some(u.default.createElement("div",{key:"loading"},E()));case h.RemoteDataTypes.NotAsked:return r.Option.none();case h.RemoteDataTypes.Failure:return r.Option.some(N(n.value))}}()},j=function(e){var t=e.auth,n=e.photo,o=function(){return r.Option.of(t.user).exists(function(e){return e.username===n.user.username})},a=function(){return o()?r.Option.some("/account/photos"):t.isAdmin?r.Option.some("/super/photos/"+n.id+"/edit"):r.Option.none()}(),i=a.map(function(e){return{key:"edit-photo",component:u.default.createElement("a",{href:e},"Edit photo")}}),l=(0,c.catOptions)([i]);return l.length>0?r.Option.some(u.default.createElement("div",{key:"other-links",className:P.default.containerFooter},l.map(function(e){var t=e.key,n=e.component;return u.default.createElement("div",{key:t,className:P.default.cell},n)}))):r.Option.none()},L=function(e){var t=e.cachedPhoto,n=e.photoFullInfoRemoteData,o=e.photoStatsRemoteData,a=e.auth,i=(0,s.formatDate)(new Date(t.created_at)),l=(0,p.checkPhotoEntityHasStats)(t)?r.Option.some(t.stats):r.Option.none(),d=(0,p.checkPhotoEntityHasFullInfo)(t)?r.Option.some(r.Option.of(t.story.title).getOrElseL(function(){return"Info"})):r.Option.none(),f=(0,c.catOptions)([C({maybeCachedPhotoStats:l,photoStatsRemoteData:o}),M({cachedPhoto:t,photoFullInfoRemoteData:n}),j({photo:t,auth:a})]);return u.default.createElement("div",null,u.default.createElement("div",{className:P.default.containerTitle},u.default.createElement("div",{className:P.default.cell},d.map(function(e){return u.default.createElement("h2",{className:P.default.title},e)}).orNull(),u.default.createElement("span",{className:P.default.datePublished},"Published on ",u.default.createElement("time",{dateTime:t.created_at},i)))),(0,m.intersperseComponentsArray)(f,function(e){return u.default.createElement("hr",{key:"separator-"+e,className:P.default.hr})}))},B=function(e){var t=e.maybeCachedPhoto,n=e.photoFullInfoRemoteData,o=e.photoStatsRemoteData,a=e.auth;return t.filter(p.checkPhotoEntityHasBasicInfo).map(function(e){return L({cachedPhoto:e,photoStatsRemoteData:o,auth:a,photoFullInfoRemoteData:n})}).getOrElseL(function(){switch(n.type){case h.RemoteDataTypes.Reloading:case h.RemoteDataTypes.Success:return L({cachedPhoto:n.value,photoStatsRemoteData:o,auth:a,photoFullInfoRemoteData:n});case h.RemoteDataTypes.Loading:return E();case h.RemoteDataTypes.NotAsked:case h.RemoteDataTypes.Failure:return null}})},x=function(e,t){return{auth:(0,f.getAuth)(e)}};t.default=(0,l.connect)(x)(B)},2036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMetadata=void 0;var o=n(35),a=function(e){return"ƒ/"+e},r=function(e){return e+"s"},i=function(e){return e+"mm"},u=function(e){return""!==e?e:void 0};t.getMetadata=function(e){var t=e.photo;return[{name:"Camera Make",value:u(t.exif.make)},{name:"Camera Model",value:(0,o.normalizeMaybe)(t.exif.model)},{name:"Focal Length",value:(0,o.mapMaybe)(i,(0,o.normalizeMaybe)(t.exif.focal_length))},{name:"Aperture",value:(0,o.mapMaybe)(a,(0,o.normalizeMaybe)(t.exif.aperture))},{name:"Shutter Speed",value:(0,o.mapMaybe)(r,(0,o.normalizeMaybe)(t.exif.exposure_time))},{name:"ISO",value:(0,o.normalizeMaybe)(t.exif.iso)},{name:"Dimensions",value:t.width+" × "+t.height}].map(function(e){var t=e.name,n=e.value;return{name:t,value:(0,o.getOrElseMaybe)(function(){return"--"},n)}})}},2037:function(e,t){e.exports={colorGrey:"#999",fontWeightMedium:"xLon9",lineHeightTitle:"U8wGh",lineHeightCopy:"_13hUA",containerPaddingUnit:"16px",cellPaddingUnit:"8px",headerFontSize:"21px",smallFontSize:"12px",placeholderBackground:"_2VWD4",container:"_11so1",cell:"_3aBA9",col:"Rs1Ko",containerTitle:"_3dtte _11so1",containerFooter:"_2qSy1 _11so1",title:"_2dIZQ U8wGh",datePublished:"_1vScU",p:"_5UTXm",stats:"_19Kkj _11so1",stat:"_1H3Tk _3aBA9 Rs1Ko",statLabel:"_2FiKI",statLabelIcon:"_2nkiz",statLabelText:"B5nBa xLon9",statValue:"_2zoGD",statValueTotal:"_20G9q _13hUA",statValueDelta:"_3R4g7",metadataItemName:"_24YMC",hr:"_1CXhw",metadata:"_1Z2CJ _11so1",metadataItem:"_1XYV- _3aBA9 Rs1Ko",metadataItemValue:"_3Dok4",statValueTotalPlaceholder:"_19b04 _2VWD4",statValueDeltaPlaceholder:"_2rDWN _2VWD4"}},2038:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2039);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2039:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=o(a),i=n(1653),u=n(1755),l=o(u),s=n(2040),c=o(s),d=function(e){var t=e.maybeCachedPhoto,n=e.photoId,o=e.maybeMainImageCurrentSrc,a=e.photoFullInfoRemoteData,u=e.modalLocationState,s=t.filter(i.checkPhotoEntityHasBasicInfo).map(function(e){return e.urls.raw});return r.default.createElement(l.default,{photoId:n,modalLocationState:u,maybeMainImageCurrentSrc:o,maybeRawPhotoUrl:s},r.default.createElement(c.default,{maybeCachedPhoto:t,photoFullInfoRemoteData:a}))};t.default=d},2040:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2041);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})},2041:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=o(a),i=n(1),u=o(i),l=n(147),s=n(29),c=n(570),d=n(80),f=n(19),p=n(1653),h=n(541),m=n(621),v=o(m),y=n(622),_=o(y),b=n(33),g=o(b),w=n(515),P=o(w),T=n(2042),O=o(T),E=function(){return u.default.createElement("div",{className:O.default.container},u.default.createElement("div",{className:O.default.cell},u.default.createElement(P.default,{padContentBelow:!1})))},k=function(e){var t=e.buttonShareProps,n=e.label,o=e.iconClassName;return u.default.createElement(v.default,Object.assign({},t,{className:O.default.shareLink,buttonType:"outline"}),u.default.createElement(g.default,{type:(0,d.getProperty)(t.type,s.SvgType),className:o}),u.default.createElement("span",{className:O.default.shareLinkText},n))},S=function(e){var t=e.photo,n="photos-page-share",o=t.links.html,a=(0,f.trackUrl)(o,{utmSource:"facebook",utmContent:n}),i=(0,f.trackUrl)(o,{utmSource:"twitter",utmContent:n}),s=(0,f.trackUrl)(o,{utmSource:"pinterest",utmContent:n}),d=(0,f.trackUrl)(o,{utmSource:"email",utmContent:n}),p=(0,c.getCreditText)(t.user),h=(0,l.buildImgixUrlWithDefaults)(t.urls.raw)({w:2e3}),m=[{key:"facebook",props:{buttonShareProps:{type:"facebook",url:a},label:"Facebook",iconClassName:O.default.facebookShareLinkIcon}},{key:"pinterest",props:{buttonShareProps:{type:"pinterest",url:s,message:p,media:h},label:"Pinterest",iconClassName:O.default.pinterestShareLinkIcon}},{key:"twitter",props:{buttonShareProps:{type:"twitter",url:i,message:p},label:"Twitter",iconClassName:O.default.twitterShareLinkIcon}},{key:"email",props:{buttonShareProps:{type:"email",url:d},label:"Email",iconClassName:O.default.emailShareLinkIcon}}];return u.default.createElement("div",null,u.default.createElement("div",{className:O.default.container},u.default.createElement("div",{className:O.default.cell},u.default.createElement("h2",{className:O.default.title},"Share"),u.default.createElement("span",{className:O.default.photographer},"Photo by ",t.user.name)),u.default.createElement("div",{className:O.default.halfCell+" "+O.default.shareLinks},m.map(function(e){var t=e.key,n=e.props;return u.default.createElement("div",{key:t,className:(0,r.default)(O.default.halfCell,O.default.shareLinkContainer)},k(n))})),u.default.createElement("div",{className:O.default.cell},u.default.createElement(_.default,{buttonText:"Copy link"},t.links.html))))},I=function(e){var t=e.maybeCachedPhoto,n=e.photoFullInfoRemoteData;return t.filter(p.checkPhotoEntityHasBasicInfo).map(function(e){return S({photo:e})}).getOrElseL(function(){switch(n.type){case h.RemoteDataTypes.Reloading:case h.RemoteDataTypes.Success:return S({photo:n.value});case h.RemoteDataTypes.Loading:return E();case h.RemoteDataTypes.NotAsked:case h.RemoteDataTypes.Failure:return null}})};t.default=I},2042:function(e,t){e.exports={spacingUnit:"4px",fontWeightNormal:"_27Bp2",colorFacebook:"#3b5998",colorTwitter:"#1da1f2",colorPinterest:"#c92228",colorDarkGrey:"#777",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",cellPaddingUnitHalf:"4px",headerFontSize:"21px",smallFontSize:"12px",container:"_1OFta",cell:"_1EBGx",halfCell:"Jo1xA",title:"_9Hf2J _27Bp2",photographer:"pfcZe",shareLinks:"ZkC2g",shareLinkContainer:"lt4QO",shareLink:"_1szYK",shareLinkIcon:"_2rBQc",facebookShareLinkIcon:"_31Q2i _2rBQc",twitterShareLinkIcon:"_1OESI _2rBQc",pinterestShareLinkIcon:"_2-0Nn _2rBQc",emailShareLinkIcon:"_1hTw9 _2rBQc",shareLinkText:"_1kUwK"}},2043:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildPhotoReduxState=t.getPhotoWithInfo=void 0;var a=n(206),r=n(553),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),u=n(1690);t.getPhotoWithInfo=function(e){return(0,u.throwErrorsInObservableIfPresent)(i.getPhotoWithInfo({photoId:e}).pipe((0,a.map)(function(e){return e.response})))},t.buildPhotoReduxState=function(e){return function(t){return{photosRemoteData:{fullInfo:o({},e,t),relatedPhotos:{},stats:{}}}}}},609:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1995);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(a).default}})}});
//# sourceMappingURL=photos-route.main.9fca1.js.map